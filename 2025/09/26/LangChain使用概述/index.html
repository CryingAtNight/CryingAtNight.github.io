<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>LangChain使用概述 | Yinjin Yao的博客</title><meta name="author" content="Yinjin Yao"><meta name="copyright" content="Yinjin Yao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="LangChain使用概述 LangChain的使用场景    项目名称 技术点 难度     文档问答助手 Prompt + Embedding + RetrievalQA ⭐⭐   智能日程规划助手 Agent + Tool + Memory ⭐⭐⭐   LLM+数据库问答 SQLDatabaseToolkit + Agent ⭐⭐⭐⭐">
<meta property="og:type" content="article">
<meta property="og:title" content="LangChain使用概述">
<meta property="og:url" content="https://cryingatnight.github.io/2025/09/26/LangChain%E4%BD%BF%E7%94%A8%E6%A6%82%E8%BF%B0/index.html">
<meta property="og:site_name" content="Yinjin Yao的博客">
<meta property="og:description" content="LangChain使用概述 LangChain的使用场景    项目名称 技术点 难度     文档问答助手 Prompt + Embedding + RetrievalQA ⭐⭐   智能日程规划助手 Agent + Tool + Memory ⭐⭐⭐   LLM+数据库问答 SQLDatabaseToolkit + Agent ⭐⭐⭐⭐">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cryingatnight.github.io/img/lita5.jpg">
<meta property="article:published_time" content="2025-09-26T04:00:00.000Z">
<meta property="article:modified_time" content="2025-09-26T03:37:36.148Z">
<meta property="article:author" content="Yinjin Yao">
<meta property="article:tag" content="LangChain">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cryingatnight.github.io/img/lita5.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "LangChain使用概述",
  "url": "https://cryingatnight.github.io/2025/09/26/LangChain%E4%BD%BF%E7%94%A8%E6%A6%82%E8%BF%B0/",
  "image": "https://cryingatnight.github.io/img/lita5.jpg",
  "datePublished": "2025-09-26T04:00:00.000Z",
  "dateModified": "2025-09-26T03:37:36.148Z",
  "author": [
    {
      "@type": "Person",
      "name": "Yinjin Yao",
      "url": "https://cryingatnight.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/headimage.png"><link rel="canonical" href="https://cryingatnight.github.io/2025/09/26/LangChain%E4%BD%BF%E7%94%A8%E6%A6%82%E8%BF%B0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'LangChain使用概述',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/headimage.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-flask"></i><span> 实验室</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="http://121.199.61.105/"><i class="fa-fw fas fa-q"></i><span> 豆瓣网开发</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://fuckornot.on.websim.com/"><i class="fa-fw fa fa-trophy"></i><span> 上不上AI评分系统</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://fontawesome.com/icons"><i class="fa-fw fa fa-check-circle"></i><span> font-awesome v6 图标</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/lita5.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/headimage.png" alt="Logo"><span class="site-name">Yinjin Yao的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">LangChain使用概述</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-flask"></i><span> 实验室</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="http://121.199.61.105/"><i class="fa-fw fas fa-q"></i><span> 豆瓣网开发</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://fuckornot.on.websim.com/"><i class="fa-fw fa fa-trophy"></i><span> 上不上AI评分系统</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://fontawesome.com/icons"><i class="fa-fw fa fa-check-circle"></i><span> font-awesome v6 图标</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">LangChain使用概述</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-09-26T04:00:00.000Z" title="发表于 2025-09-26 12:00:00">2025-09-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-09-26T03:37:36.148Z" title="更新于 2025-09-26 11:37:36">2025-09-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="langchain使用概述">LangChain使用概述</h1>
<h2 id="langchain的使用场景">LangChain的使用场景</h2>
<table>
<thead>
<tr class="header">
<th>项目名称</th>
<th>技术点</th>
<th>难度</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>文档问答助手</td>
<td>Prompt + Embedding + RetrievalQA</td>
<td>⭐⭐</td>
</tr>
<tr class="even">
<td>智能日程规划助手</td>
<td>Agent + Tool + Memory</td>
<td>⭐⭐⭐</td>
</tr>
<tr class="odd">
<td>LLM+数据库问答</td>
<td>SQLDatabaseToolkit + Agent</td>
<td>⭐⭐⭐⭐</td>
</tr>
<tr class="even">
<td>多模型路由对话系统</td>
<td>RouterChain + 多 LLM</td>
<td>⭐⭐⭐⭐</td>
</tr>
<tr class="odd">
<td>互联网智能客服</td>
<td>ConversationChain + RAG +Agent</td>
<td>⭐⭐⭐⭐⭐</td>
</tr>
<tr class="even">
<td>企业知识库助手（RAG + 本地模 型）</td>
<td>VectorDB + LLM + Streamlit</td>
<td>⭐⭐⭐⭐⭐</td>
</tr>
</tbody>
</table>
<h2 id="langchain资料介绍">LangChain资料介绍</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.langchain.com/langchain">官网地址：https://www.langchain.com/langchain</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/docs/introduction/">官网文档：https://python.langchain.com/docs/introduction/</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/api_reference/">API文档：https://python.langchain.com/api_reference/</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/langchain-ai/langchain">github地址：https://github.com/langchain-ai/langchain</a></li>
</ul>
<h2 id="架构设计">架构设计</h2>
<h3 id="总体架构图">总体架构图</h3>
<p>V0.2 / V0.3 版本 <img src="file-20250926003401794.png" alt="file-20250926003401794.png" /> 图中展示了LangChain生态系统的主要组件及其分类，分为三个层次： - 架构(Architecture) - 组件 (Components) - 部署(Deployment)。</p>
<h3 id="内部架构详情">内部架构详情</h3>
<p><strong>结构1：LangChain</strong></p>
<p>l<strong>angchain</strong>：构成应用程序认知架构的Chains，Agents，Retrieval strategies等 构成应⽤程序的链、智能体、RAG。</p>
<p><strong>langchain-community</strong>：第三方集成 ⽐如：Model I/O、Retrieval、Tool &amp; Toolkit；合作伙伴包 langchain-openai，langchain anthropic等。</p>
<p><strong>langchain-Core</strong>：基础抽象和LangChain表达式语言 (LCEL)</p>
<p>小结：LangChain，就是AI应用组装套件，封装了一堆的API。langchain框架不大，但是里面琐碎的知 识点特别多。就像玩乐高，提供了很多标准化的乐高零件（比如，连接器、轮子等）</p>
<p><strong>结构2：LangGraph</strong> LangGraph可以看做基于LangChain的api的进一步封装，能够协调多个Chain、Agent、Tools完成更 复杂的任务，实现更高级的功能。</p>
<p><strong>结构3：LangSmith</strong> https://docs.smith.langchain.com/</p>
<p><strong>链路追踪</strong>。提供了6大功能，涉及Debugging (调试)、Playground (沙盒)、Prompt Management (提 示管理)、Annotation (注释)、Testing (测试)、Monitoring (监控)等。与LangChain无缝集成，帮助你 从原型阶段过渡到生产阶段。</p>
<p>正是因为LangSmith这样的⼯具出现，才使得LangChain意义更⼤，要不仅靠⼀些API（当然也 可以不⽤，⽤原⽣的API），⽀持不住LangChain的热度。</p>
<p><strong>结构4：LangServe</strong> 将LangChain的可运行项和链部署为REST API，使得它们可以通过网络进行调用。 Java怎么调用langchain呢？就通过这个langserve。将langchain应用包装成一个rest api，对外暴露服 务。同时，支持更高的并发，稳定性更好。</p>
<p><strong>总结：LangChain当中，最有前途的两个模块就是：LangGraph，LangSmith。</strong></p>
<p>LangChain能做RAG，其它的⼀些框架也能做，而且做的也不错，⽐如LlamaIndex。所以这时 候LangChain要在Agent这块发⼒，那就需要LangGraph。而LangSmith，做运维、监控。故， ⼆者是LangChain⾥最有前途的。</p>
<h1 id="开发前的准备工作">开发前的准备工作</h1>
<h2 id="前置知识">前置知识</h2>
<ol type="1">
<li><strong>Python 基础语法</strong>
<ul>
<li>变量、函数、类、装饰器、上下文管理器</li>
<li>模块导入、包管理（推荐用 pip 或 conda ）</li>
</ul></li>
<li><strong>大语言模型基础</strong>
<ul>
<li>了解什么是 LLM、Token、Prompt、Embedding</li>
<li>OpenAI API 或其他模型提供商，如 Anthropic、阿里云百炼、DeepSeek等</li>
<li>通过浏览器或app使用过大模型（比如：豆包、DeepSeek等）</li>
</ul></li>
</ol>
<h2 id="相关环境安装">相关环境安装</h2>
<h3 id="安装python或anaconda"><strong>安装Python或Anaconda</strong></h3>
<p>LangChain基于Python开发，因此需确保系统中安装了Python。 - 方式1：直接下载Python安装包。推荐版本为Python 3.10及以上 - 方式2：使用包管理工具（如Anaconda）进行安装。通过Anaconda可以轻松创建和管理虚拟环境，为 项目提供独立的依赖空间，避免不同项目之间的依赖冲突。</p>
<h3 id="如何下载安装包">如何下载安装包</h3>
<p>比如：安装langchain包</p>
<p><strong>方式1：使用pip指令</strong> 基础指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装包（默认最新版） </span></span><br><span class="line">pip install langchain </span><br><span class="line"><span class="comment"># 指定版本 </span></span><br><span class="line"></span><br><span class="line">pip install langchain==0.3.7 </span><br><span class="line"></span><br><span class="line"><span class="comment"># 批量安装（空格分隔） </span></span><br><span class="line">pip install langchain requests numpy </span><br><span class="line"></span><br><span class="line"><span class="comment"># 升级包 </span></span><br><span class="line">pip install --upgrade langchain </span><br><span class="line"></span><br><span class="line"><span class="comment"># 卸载包 </span></span><br><span class="line">pip uninstall langchain </span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看已安装包 </span></span><br><span class="line">pip list</span><br></pre></td></tr></table></figure>
<p>高级操作 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 国内镜像加速 （解决下载慢） -i：指定镜像源 </span></span><br><span class="line">pip install -i https://mirrors.aliyun.com/pypi/simple/ langchain </span><br><span class="line"></span><br><span class="line"><span class="comment"># 从本地/URL安装： </span></span><br><span class="line">pip install ./local_package.whl </span><br><span class="line">pip install https://github.com/user/repo/archive/main.zip</span><br></pre></td></tr></table></figure></p>
<p>方式2：使用conda指令 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装包（默认仓库） </span></span><br><span class="line">conda install langchain </span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定频道（如 conda-forge）</span></span><br><span class="line">conda install -c conda-forge langchain==0.3.7 </span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新包 </span></span><br><span class="line">conda update langchain </span><br><span class="line"></span><br><span class="line"><span class="comment"># 卸载包 </span></span><br><span class="line">conda uninstall langchain </span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看已安装包 </span></span><br><span class="line">conda list</span><br></pre></td></tr></table></figure></p>
<p><code>-c ：是--channel 的缩写，conda⽤于指定包的安装来源渠道。</code> <code>conda-forge ：该源⽐官⽅默认渠道更新更快、包更全</code></p>
<p><strong>建议：二者最好不好混用，推荐先conda装基础包，后 pip补充的顺序。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查包来源 </span></span><br><span class="line">conda list <span class="comment"># conda 安装的包显示频道，pip安装的显示 pypi</span></span><br></pre></td></tr></table></figure>
<figure>
<img src="file-20250926094456875.png" alt="file-20250926094456875.png" /><figcaption aria-hidden="true">file-20250926094456875.png</figcaption>
</figure>
<h1 id="大模型应用开发">大模型应用开发</h1>
<p>大模型应用技术特点：门槛低，天花板高。</p>
<h2 id="基于rag架构的开发">基于RAG架构的开发</h2>
<p><strong>背景</strong>： - 大模型的知识冻结 - 大模型幻觉 而RAG就可以非常精准的解决这两个问题。</p>
<h2 id="何为rag">何为RAG？</h2>
<p>Retrieval-Augmented Generation（检索增强生成） <img src="file-20250926094734403.png" alt="file-20250926094734403.png" /> <code>检索-增强-⽣成过程：检索可以理解为第10步，增强理解为第12步（这⾥的提⽰词包含检索到的数 据），⽣成理解为第15步。</code></p>
<p>类似的细节图： <img src="file-20250926094911845.png" alt="file-20250926094911845.png" /></p>
<p>强调一下难点的步骤： <img src="file-20250926100636770.png" /> 这些过程中的难点： 1、文件解析 2、文件切割 3、知识检索 4、知识重排序</p>
<p><strong>Reranker的使用场景</strong>： - 适合：追求 回答<strong>高精度和 高相关性</strong>的场景中特别适合使用 Reranker，例如专业知识库或者客服系 统等应用。 - 不适合：引入reranker会增加召回时间，增加检索延迟。服务对 响应时间要求高时，使用reranker 可能不合适。</p>
<p><strong>这里有三个位置涉及到大模型的使用：</strong> - 第3步向量化时，需要使用EmbeddingModels。 - 第7步重排序时，需要使用RerankModels。 - 第9步生成答案时，需要使用LLM。</p>
<p>ChatGPT：⽀持约8k token的上下⽂ GPT4：⽀持约32k token的上下⽂</p>
<p>最新的很多⼤模型：都⽀持100万、1000万 token的上下⽂ （相当于2000万字⽂本或20小时 视频） ⼀般情况下模型中 token 和字数的换算⽐例⼤致如下： - 1 个英⽂字符 ≈ 0.3 个 token。 - 1 个中⽂字符 ≈ 0.6 个 token。</p>
<h2 id="如何选择">如何选择</h2>
<p>面对一个需求，如何开始，如何选择技术方案？下面是个常用思路： <img src="file-20250926101647564.png" /> <code>注意：其中最容易被忽略的，是准备测试数据</code></p>
<h1 id="langchain的核心组件">LangChain的核心组件</h1>
<p>学习Langchain最简单直接的方法就是阅读官方文档。 https://python.langchain.com/v0.1/docs/modules/</p>
<h2 id="一个问题引发的思考">一个问题引发的思考</h2>
<p><strong>如果要组织一个AI应用，开发者一般需要什么？</strong> 1. 提示词模板的构建，不仅仅只包含用户输入。 2. 模型调用与返回，参数设置，返回内容的格式化输出。 3. 知识库查询，这里会包含文档加载，切割，以及转化为词嵌入（Embedding）向量。 4. 其他第三方工具调用，一般包含天气查询、Google搜索、一些自定义的接口能力调用。 5. 记忆获取，每一个对话都有上下文，在开启对话之前总得获取到之前的上下文吧？</p>
<h2 id="核心组件的概述">核心组件的概述</h2>
<p>LangChain的核心组件涉及六大模块，这六大模块提供了一个全面且强大的框架，使开发者能够创建复 杂、高效且用户友好的基于大模型的应用。</p>
<p><img src="file-20250926102039819.png" /></p>
<h2 id="核心组件的说明">核心组件的说明</h2>
<h3 id="核心组件1model-io">核心组件1：Model I/O</h3>
<p>这个模块使⽤最多，也最简单 Model I/O：标准化各个大模型的输入和输出，包含输入模版，模型本身和格式化输出。 以下是使用语言模型从输入到输出的基本流程。 <img src="file-20250926102157179.png" /></p>
<p>以下是对每一块的总结： - <strong>Format(格式化)</strong> ：即指代Prompts Template，通过模板管理大模型的输入。将原始数据格式化成 模型可以处理的形式，插入到一个模板问题中，然后送入模型进行处理。 - <strong>Predict(预测)</strong> ：即指代Models，使用通用接口调用不同的大语言模型。接受被送进来的问题，然 后基于这个问题进行预测或生成回答。 - <strong>Parse(生成)</strong> ：即指代Output Parser 部分，用来从模型的推理中提取信息，并按照预先设定好的 模版来规范化输出。比如，格式化成一个结构化的JSON对象。</p>
<h3 id="核心组件2chains">核心组件2：Chains</h3>
<p>Chain：“链条”，用于将多个模块串联起来组成一个完整的流程，是 LangChain 框架中最重要的模块。 例如，一个 Chain 可能包括一个 Prompt 模板、一个语言模型和一个输出解析器，它们一起工作以处理 用户输入、生成响应并处理输出。</p>
<p><strong>常见的Chain类型：</strong> - <strong>LLMChain</strong> ：最基础的模型调用链 - <strong>SequentialChain</strong> ：多个链串联执行 - <strong>RouterChain</strong> ：自动分析用户的需求，引导到最适合的链 - <strong>RetrievalQA</strong> ：结合向量数据库进行问答的链</p>
<h3 id="核心组件3memory">核心组件3：Memory</h3>
<p>Memory：记忆模块，用于保存对话历史或上下文信息，以便在后续对话中使用。 <strong>常见的 Memory 类型：</strong> - <strong>ConversationBufferMemory</strong> ：保存完整的对话历史 - <strong>ConversationSummaryMemory</strong> ：保存对话内容的精简摘要（适合长对话） - <strong>ConversationSummaryBufferMemory</strong> ：混合型记忆机制，兼具上面两个类型的特点 - <strong>VectorStoreRetrieverMemory</strong> ：保存对话历史存储在向量数据库中</p>
<h3 id="核心组件4agents">核心组件4：Agents</h3>
<p>Agents，对应着智能体，是 LangChain 的高阶能力，它可以自主选择工具并规划执行步骤。 <strong>Agent 的关键组成</strong>： - <strong>AgentType</strong> ：定义决策逻辑的工作流模式 - <strong>Tool</strong> ：是一些内置的功能模块，如API调用、搜索引擎、文本处理、数据查询等工具。Agents通 过这些工具来执行特定的功能。 - <strong>AgentExecutor</strong> ：用来运行智能体并执行其决策的工具，负责协调智能体的决策和实际的工具执 行。</p>
<p><code>⽬前最热⻔的智能体开发实践，未来能够真正实现通⽤⼈⼯智能的落地⽅案。</code> `这⾥的Agent，就会涉及到前⾯讲的memory，以及tools。</p>
<h3 id="核心组件5retrieval">核心组件5：Retrieval</h3>
<p>Retrieval：对应着RAG，检索外部数据，然后在执行生成步骤时将其传递到 LLM。步骤包括文档加载、 切割、Embedding等 <img src="file-20250926102816605.png" /> - <strong>Source</strong> ：数据源，即大模型可以识别的多种类型的数据：视频、图片、文本、代码、文档等。 - <strong>Load</strong> ：负责将来自不同数据源的非结构化数据，加载为文档(Document)对象 - <strong>Transform</strong> ：负责对加载的文档进行转换和处理，比如将文本拆分为具有语义意义的小块。 - <strong>Embed</strong> ：将文本编码为向量的能力。一种用于嵌入文档，另一种用于嵌入查询 - <strong>Store</strong> ：将向量化后的数据进行存储 - <strong>Retrieve</strong> ：从大规模文本库中检索和查询相关的文本段落</p>
<p><code>绿⾊的是⼊库存储前的操作。</code></p>
<h3 id="核心组件6callbacks">核心组件6：Callbacks</h3>
<p>Callbacks：回调机制，允许连接到 LLM 应用程序的各个阶段，可以监控和分析LangChain的运行情 况，比如日志记录、监控、流传输等，以优化性能。</p>
<p><code>回调函数，对于程序员们应该都不陌⽣。这个函数允许我们在LLM的各个阶段使⽤各种各样的 “钩⼦”，从而达实现⽇志的记录、监控以及流式传输等功能。</code></p>
<h1 id="langchain的helloworld">LangChain的helloworld</h1>
<h2 id="获取大模型">获取大模型</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#导入 dotenv 库的 load_dotenv 函数，用于加载环境变量文件（.env）中的配置</span></span><br><span class="line"><span class="keyword">import</span> dotenv <span class="keyword">from</span> langchain_openai </span><br><span class="line"><span class="keyword">import</span> ChatOpenAI <span class="keyword">import</span> os </span><br><span class="line"></span><br><span class="line">dotenv.load_dotenv() <span class="comment">#加载当前目录下的 .env 文件 </span></span><br><span class="line"></span><br><span class="line">os.environ[ <span class="string">&#x27;OPENAI_API_KEY&#x27;</span> ] = os.getenv( <span class="string">&quot;OPENAI_API_KEY1&quot;</span> )</span><br><span class="line">os.environ[ <span class="string">&#x27;OPENAI_BASE_URL&#x27;</span> ] = os.getenv( <span class="string">&quot;OPENAI_BASE_URL&quot;</span> ) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建大模型实例 </span></span><br><span class="line">llm = ChatOpenAI(model= <span class="string">&quot;gpt-4o-mini&quot;</span> ) <span class="comment"># 默认使用 gpt-3.5-turbo </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接提供问题，并调用llm </span></span><br><span class="line">response = llm.invoke( <span class="string">&quot;什么是大模型？&quot;</span> ) </span><br><span class="line"><span class="built_in">print</span> (response)</span><br></pre></td></tr></table></figure>
<p>结果： <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">content=⼤模型（Large Model）通常是指在深度学习和机器学习领域中，拥有⼤量参数和复杂 结构的模型。这些模型可以处理复杂的数据集，进⾏⾼级的任务，如⾃然语⾔处理、图像识别、⽣ 成对抗⽹络等。以下是⼀些关于⼤模型的关键点：\n\n1. 参数量：⼤模型通常具备数亿甚⾄数千亿 个参数，这使得它们能够学习到更加丰富的特征和关系。\n\n2. 计算需求：由于其庞⼤的规模，⼤ 模型通常需要⾼性能的计算资源，例如GPU或TPU，以及⻓时间的训练过程。\n\n3. 数据需求： 训练⼤模型通常需要⼤量的数据，以确保模型能够在各种情况下进⾏有效的学习和泛化。\n\n4. 应 ⽤⼴泛：⼤模型在许多领域都有应⽤，包括语⾔模型（如GPT-3、BERT等）、图像处理（如卷积 神经⽹络）以及⽣成模型（如GAN）。\n\n5. 转移学习：许多⼤模型允许通过转移学习的⽅式进 ⾏微调，使得它们能够在特定任务上表现良好，而⽆需从头开始训练。\n\n⼤模型的出现⼤⼤推动 了⼈⼯智能的发展，使得许多复杂的任务变得可⾏，并且在多个领域取得了显著的成果。<span class="string">&#x27; additional_kwargs=&#123;refusal: None&#125; response_metadata=&#123;token_usage: &#123;completion_tokens: 289, prompt_tokens: 12, total_tokens: 301, completion_tokens_details: &#123;accepted_prediction_tokens: 0, audio_tokens: 0, reasoning_tokens: 0, rejected_prediction_tokens: 0&#125;, prompt_tokens_details: &#123;audio_tokens: 0, cached_tokens: 0&#125;&#125;, model_name: gpt-4o-mini-2024-07-18, system_fingerprint: fp_efad92c60b, id: chatcmpl-BxO81Kq8FpSQgLyTikWfGzOlry2MF, service_tier: None, finish_reason: stop, logprobs: None&#125; id=run--134748c7-8c54-4784 8781-6ea143086285-0 usage_metadata=&#123;input_tokens: 12, output_tokens: 289, total_tokens: 301, input_token_details: &#123;audio: 0, cache_read: 0&#125;, output_token_details: &#123;audio: 0, reasoning: 0&#125;&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>其中，需要在当前工程下提供 .env 文件，文件中提供如下信息： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OPENAI_API_KEY1= &quot;sk-cvUm8OddQbly.............AGgIHTm9kMH7Bf226G2&quot; #你自己的密钥 OPENAI_BASE_URL= &quot;https://api.siliconflow.cn/v1&quot;     #url是固定值，统一写成这样</span><br></pre></td></tr></table></figure></p>
<p>密钥来自于：<a target="_blank" rel="noopener" href="https://cloud.siliconflow.cn/i/iICxcKiF">https://cloud.siliconflow.cn/i/iICxcKiF</a> <img src="file-20250926104121004.png" /></p>
<h2 id="使用提示词模板">使用提示词模板</h2>
<p>我们也可以创建prompt template, 并引入一些变量到prompt template中，这样在应用的时候更加灵 活。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate </span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要注意的一点是，这里需要指明具体的role，在这里是system和用户 </span></span><br><span class="line">prompt = ChatPromptTemplate.from_messages([</span><br><span class="line">	(<span class="string">&quot;system&quot;</span>,<span class="string">&quot;你是世界级的技术文档编写者&quot;</span>),</span><br><span class="line">	(<span class="string">&quot;user&quot;</span>,<span class="string">&quot;&#123;input&#125;&quot;</span>) <span class="comment"># &#123;input&#125;为变量 </span></span><br><span class="line">]) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 我们可以把prompt和具体llm的调用和在一起。 </span></span><br><span class="line">chain = prompt | llm </span><br><span class="line">message = chain.invoke(&#123; <span class="string">&quot;input&quot;</span> : <span class="string">&quot;大模型中的LangChain是什么?&quot;</span> &#125;) </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> (message) </span><br><span class="line"><span class="comment"># print(type(message))</span></span><br></pre></td></tr></table></figure>
<p>结果： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">LangChain是一个开源框架，旨在简化和增强大语言模型（如GPT-3、GPT-4 等）的开发与应 用。它为开发者提供了一套工具和组件，使得在不同的用例中利用语言模型变得更加高效和灵 活。LangChain 的全名是“Language Chain”，意在强调它将多个处理步骤或组件串联在一 起，形成一个完整的处理链，以便更好地利用语言模型的能力。 </span><br><span class="line">### LangChain 的主要特性包括：</span><br><span class="line"> </span><br><span class="line"> 1. **组件化设计**：LangChain 提供了高度模块化的组件，允许开发者根据需要组合和扩展不同 的功能，比如文本生成、数据提取、工具调用等。 </span><br><span class="line">2. **链式调用**：可以将多个操作串联在一起，例如先生成文本，然后对生成的内容进行解析或处 理，使得工作流程更加流畅。 </span><br><span class="line">3. **多种后端支持**：LangChain 支持多种语言模型和生成后端，方便开发者在不同的平台和环 境下进行开发。 </span><br><span class="line">4. **集成外部工具**：LangChain 允许与外部API、数据库和其他工具集成，使得模型可以利用外 部数据源和功能，增强其智能性和实用性。</span><br><span class="line">5. **可扩展性**：开发者可以通过自定义组件和方法，扩展 LangChain 的功能，以适应特定的业 务需求。</span><br><span class="line">   </span><br><span class="line">### 应用场景： </span><br><span class="line">- **对话系统**：构建更智能的聊天机器人，能够理解上下文并进行多轮对话。</span><br><span class="line">- **内容生成**：生成文章、故事、产品描述等多种内容，并对其进行编辑和优化。</span><br><span class="line">- **数据提取和处理**：从大量文本中提取关键信息，并将其结构化。</span><br><span class="line">- **知识库查询**：结合语言模型与知识库，提供深度的知识查询和推荐。 总之，LangChain 作为大模型应用的一个助手工具，提升了开发者的生产力，使得他们可以更专 注于构建创新的应用，而不是陷入底层实现的复杂性中。</span><br><span class="line"># &lt;class &#x27;langchain_core.messages.ai.AIMessage&#x27;&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="使用输出解析器">使用输出解析器</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_openai </span><br><span class="line"><span class="keyword">import</span> ChatOpenAI </span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate </span><br><span class="line"><span class="keyword">from</span> langchain_core.output_parsers <span class="keyword">import</span> StrOutputParser,JsonOutputParser </span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化模型 </span></span><br><span class="line">llm = ChatOpenAI(model= <span class="string">&quot;gpt-4o-mini&quot;</span> ) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建提示模板 </span></span><br><span class="line">prompt = ChatPromptTemplate.from_messages([</span><br><span class="line">	(<span class="string">&quot;system&quot;</span>,<span class="string">&quot;你是世界级的技术文档编写者&quot;</span>),</span><br><span class="line">	(<span class="string">&quot;user&quot;</span>,<span class="string">&quot;&#123;input&#125;&quot;</span>) <span class="comment"># &#123;input&#125;为变量 </span></span><br><span class="line">])  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用输出解析器 </span></span><br><span class="line"><span class="comment"># output_parser = StrOutputParser() </span></span><br><span class="line">output_parser = JsonOutputParser() </span><br><span class="line"></span><br><span class="line"><span class="comment"># 将其添加到上一个链中 </span></span><br><span class="line"><span class="comment"># chain = prompt | llm </span></span><br><span class="line">chain = prompt | llm | output_parser </span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用它并提出同样的问题。答案是一个字符串，而不是ChatMessage </span></span><br><span class="line"><span class="comment"># chain.invoke(&#123;&quot;input&quot;: &quot;LangChain是什么?&quot;&#125;) </span></span><br><span class="line">chain.invoke(&#123; <span class="string">&quot;input&quot;</span> : <span class="string">&quot;LangChain是什么? 用JSON格式回复，问题用question，回答用answer&quot;</span> &#125;)</span><br></pre></td></tr></table></figure>
<p>结果： <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;question: LangChain是什么?&#x27;, answer: LangChain是⼀个开源框架，⽤于构建与⼤型语⾔模型（LLMs）交互的应⽤程序。它 提供了⼀个灵活的⼯具集，允许开发⼈员创建具有复杂推理能⼒、链式任务处理和上下⽂管理的智 能应⽤。LangChain⽀持多种数据源和组件，可以帮助开发者在各种环境中更⾼效地利⽤语⾔模 型。&#x27;&#125;</span><br></pre></td></tr></table></figure></p>
<p>或者： <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> ChatOpenAI </span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate </span><br><span class="line"><span class="keyword">from</span> langchain_core.output_parsers <span class="keyword">import</span> StrOutputParser,JsonOutputParser </span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化模型 </span></span><br><span class="line">llm = ChatOpenAI(model= <span class="string">&quot;gpt-4o-mini&quot;</span> ) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建提示模板 </span></span><br><span class="line">prompt = ChatPromptTemplate.from_messages([</span><br><span class="line">	(<span class="string">&quot;system&quot;</span>,<span class="string">&quot;你是世界级的技术文档编写者。输出格式要求：&#123;format_instructions&#125;&quot;</span>),</span><br><span class="line">	(<span class="string">&quot;user&quot;</span>,<span class="string">&quot;&#123;input&#125;&quot;</span>) <span class="comment"># &#123;input&#125;为变量 </span></span><br><span class="line">]) </span><br><span class="line"> <span class="comment"># 使用输出解析器</span></span><br><span class="line"> <span class="comment"># output_parser = StrOutputParser() </span></span><br><span class="line"> output_parser = JsonOutputParser() </span><br><span class="line"> </span><br><span class="line"> <span class="comment"># 将其添加到上一个链中 </span></span><br><span class="line"> <span class="comment"># chain = prompt | llm </span></span><br><span class="line"> chain = prompt | llm | output_parser </span><br><span class="line"> </span><br><span class="line"> <span class="comment"># 调用它并提出同样的问题。答案是一个字符串，而不是ChatMessage </span></span><br><span class="line"> <span class="comment"># chain.invoke(&#123;&quot;input&quot;: &quot;LangChain是什么?&quot;&#125;) </span></span><br><span class="line"> chain.invoke(&#123; <span class="string">&quot;input&quot;</span> : <span class="string">&quot;LangChain是什么? &quot;</span> <span class="string">&quot;format_instructions&quot;</span> :output_parser.get_format_instructions()&#125;)</span><br></pre></td></tr></table></figure> 结果： <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;LangChain: &#123;description: LangChain是⼀个开源的框架，⽤于构建基于语⾔模型的应⽤程 序。它旨在将不同的语⾔模型、数据源和⼯具结合起来，以便于开发者创建复杂的应⽤。<span class="string">&#x27;, key_features: [&#x27;</span>模块化设计：⽀持将不同的组件组合在⼀起，如语⾔模型、数据处理和外部 API。<span class="string">&#x27;, &#x27;</span>⽀持多种语⾔模型：兼容不同类型的语⾔模型，如OpenAI的GPT系列、BERT等。<span class="string">&#x27;, &#x27;</span>内置数据连接：可以与多种数据源进⾏集成，例如数据库、⽂件和外部API。<span class="string">&#x27;, &#x27;</span>灵活的⼯作流管理：提供了多种⽅法来定义和管理任务的执⾏流程。<span class="string">&#x27;, &#x27;</span>社区⽀持：拥有活跃的社区，提供⽂档、⽰例和⽀持。<span class="string">&#x27;, &#x27;</span>可扩展性：允许开发者根据需求定制和扩展功能。<span class="string">&#x27;], use_cases: [&#x27;</span>聊天机器⼈开发<span class="string">&#x27;, &#x27;</span>⽂本⽣成和摘要<span class="string">&#x27;, &#x27;</span>内容推荐系统<span class="string">&#x27;, &#x27;</span>⾃然语⾔理解任务<span class="string">&#x27;, &#x27;</span>⾃动化⼯作 流处理<span class="string">&#x27;], getting_started: &#123;installation: &#x27;</span>使⽤pip安装：pip install langchain, documentation_link: <span class="string">&#x27;https://langchain.readthedocs.io/en/latest/&#x27;</span>&#125;&#125;&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="使用向量存储">使用向量存储</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入和使用 WebBaseLoaderfrom langchain_community.document_loaders import WebBaseLoader  </span></span><br><span class="line"><span class="keyword">import</span> bs4  </span><br><span class="line">  </span><br><span class="line">loader = WebBaseLoader(  </span><br><span class="line">        web_path=<span class="string">&quot;https://www.gov.cn/xinwen/2020-06/01/content_5516649.htm&quot;</span>,  </span><br><span class="line">        bs_kwargs=<span class="built_in">dict</span>(parse_only=bs4.SoupStrainer(<span class="built_in">id</span>=<span class="string">&quot;UCAP-CONTENT&quot;</span>))  </span><br><span class="line">    )  </span><br><span class="line">docs = loader.load()  </span><br><span class="line"><span class="comment"># print(docs)  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># 对于嵌入模型，这里通过 API调用  </span></span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> OpenAIEmbeddings  </span><br><span class="line">  </span><br><span class="line">embeddings = OpenAIEmbeddings(model=<span class="string">&quot;text-embedding-ada-002&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> langchain_community.vectorstores <span class="keyword">import</span> FAISS  </span><br><span class="line"><span class="keyword">from</span> langchain_text_splitters <span class="keyword">import</span> RecursiveCharacterTextSplitter  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 使用分割器分割文档  </span></span><br><span class="line">text_splitter = RecursiveCharacterTextSplitter(chunk_size=<span class="number">500</span>, chunk_overlap=<span class="number">50</span>)  </span><br><span class="line">documents = text_splitter.split_documents(docs)  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(documents))  </span><br><span class="line"><span class="comment"># 向量存储  embeddings 会将 documents 中的每个文本片段转换为向量，并将这些向量存储在 FAISS 向量数据库中  </span></span><br><span class="line">vector = FAISS.from_documents(documents, embeddings)</span><br></pre></td></tr></table></figure>
<h2 id="rag检索增强生成">RAG(检索增强生成)</h2>
<p>基于外部知识，增强大模型回复</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> PromptTemplate </span><br><span class="line"></span><br><span class="line">retriever = vector.as_retriever() </span><br><span class="line">retriever.search_kwargs = &#123; <span class="string">&quot;k&quot;</span> : <span class="number">3</span>&#125; </span><br><span class="line">docs = retriever.invoke( <span class="string">&quot;建设用地使用权是什么？&quot;</span> ) </span><br><span class="line"></span><br><span class="line"><span class="comment"># for i,doc in enumerate(docs): </span></span><br><span class="line"><span class="comment"># print(f&quot;⭐第&#123;i+1&#125;条规定：&quot;) </span></span><br><span class="line"><span class="comment"># print(doc) </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.定义提示词模版 </span></span><br><span class="line">prompt_template = <span class="string">&quot;&quot;&quot; </span></span><br><span class="line"><span class="string">你是一个问答机器人。 </span></span><br><span class="line"><span class="string">你的任务是根据下述给定的已知信息回答用户问题。 </span></span><br><span class="line"><span class="string">确保你的回复完全依据下述已知信息。不要编造答案。 </span></span><br><span class="line"><span class="string">如果下述已知信息不足以回答用户的问题，请直接回复&quot;我无法回答您的问题&quot;。 </span></span><br><span class="line"><span class="string">已知信息: </span></span><br><span class="line"><span class="string">&#123;info&#125; </span></span><br><span class="line"><span class="string">用户问： &#123;question&#125; </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">请用中文回答用户问题。 &quot;&quot;&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.得到提示词模版对象 </span></span><br><span class="line">template = PromptTemplate.from_template(prompt_template) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.得到提示词对象 </span></span><br><span class="line">prompt = template.<span class="built_in">format</span>(info=docs, question= <span class="string">&#x27;建设用地使用权是什么？&#x27;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">## 9. 调用LLM </span></span><br><span class="line">response = llm.invoke(prompt) <span class="built_in">print</span> (response.content)</span><br></pre></td></tr></table></figure>
<p>结果： <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">建设⽤地使⽤权是指在法律规定的范围内，建设⽤地使⽤权⼈对特定⼟地的使⽤、建造建筑物及其 他设施的权利。根据相关法律规定，建设⽤地使⽤权可以通过出让或划拨等⽅式设⽴，并应当符合 资源节约、⽣态环境保护及⼟地⽤途的规定。建设⽤地使⽤权⼈有权转让、出资、赠与或抵押其使 ⽤权，但需遵循法律规定和合同约定。</span><br></pre></td></tr></table></figure></p>
<h2 id="使用agent">使用Agent</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.tools.retriever <span class="keyword">import</span> create_retriever_tool </span><br><span class="line"></span><br><span class="line"><span class="comment"># 检索器工具 </span></span><br><span class="line">retriever_tool = create_retriever_tool( retriever, <span class="string">&quot;CivilCodeRetriever&quot;</span> , <span class="string">&quot;搜索有关中华人民共和国民法典的信息。关于中华人民共和国民法典的任何问题，您必须使用此工 具!&quot;</span> , ) tools = [retriever_tool] </span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> langchain <span class="keyword">import</span> hub </span><br><span class="line"><span class="keyword">from</span> langchain.agents <span class="keyword">import</span> create_openai_functions_agent </span><br><span class="line"><span class="keyword">from</span> langchain.agents <span class="keyword">import</span> AgentExecutor </span><br><span class="line"></span><br><span class="line"><span class="comment"># https://smith.langchain.com/hub </span></span><br><span class="line">prompt = hub.pull( <span class="string">&quot;hwchase17/openai-functions-agent&quot;</span> ) </span><br><span class="line">agent = create_openai_functions_agent(llm, tools, prompt) </span><br><span class="line">agent_executor = AgentExecutor(agent=agent, tools=tools, verbose=<span class="literal">True</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行代理 </span></span><br><span class="line">agent_executor.invoke(&#123; <span class="string">&quot;input&quot;</span> : <span class="string">&quot;建设用地使用权是什么&quot;</span> &#125;)</span><br></pre></td></tr></table></figure>
<p>结果： <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&gt; Entering new AgentExecutor chain...</span><br><span class="line">Invoking: `CivilCodeRetriever` with `&#123;<span class="string">&#x27;query&#x27;</span>: <span class="string">&#x27;建设用地使用权&#x27;</span>&#125;`</span><br><span class="line"></span><br><span class="line">第三百四十五条　建设用地使用权可以在土地的地表、地上或者地下分别设立。</span><br><span class="line">第三百四十六条　设立建设用地使用权，应当符合节约资源、保护生态环境的要求，遵守法律、行政法规关于土地用途的规定，不得损害已经设立的用益物权。</span><br><span class="line">第三百四十七条　设立建设用地使用权，可以采取出让或者划拨等方式。</span><br><span class="line">工业、商业、旅游、娱乐和商品住宅等经营性用地以及同一土地有两个以上意向用地者的，应当采取招标、拍卖等公开竞价的方式出让。</span><br><span class="line">严格限制以划拨方式设立建设用地使用权。</span><br><span class="line">第三百四十八条　通过招标、拍卖、协议等出让方式设立建设用地使用权的，当事人应当采用书面形式订立建设用地使用权出让合同。</span><br><span class="line">建设用地使用权出让合同一般包括下列条款：</span><br><span class="line">（一）当事人的名称和住所；</span><br><span class="line">（二）土地界址、面积等；</span><br><span class="line">（三）建筑物、构筑物及其附属设施占用的空间；</span><br><span class="line">（四）土地用途、规划条件；</span><br><span class="line">（五）建设用地使用权期限；</span><br><span class="line">（六）出让金等费用及其支付方式；</span><br><span class="line">（七）解决争议的方法。</span><br><span class="line">第三百四十九条　设立建设用地使用权的，应当向登记机构申请建设用地使用权登记。建设用地使用权自登记时设立。登记机构应当向建设用地使用权人发放权属证书。</span><br><span class="line"></span><br><span class="line">第三百五十条　建设用地使用权人应当合理利用土地，不得改变土地用途；需要改变土地用途的，应当依法经有关行政主管部门批准。</span><br><span class="line">第三百五十一条　建设用地使用权人应当依照法律规定以及合同约定支付出让金等费用。</span><br><span class="line">第三百五十二条　建设用地使用权人建造的建筑物、构筑物及其附属设施的所有权属于建设用地使用权人，但是有相反证据证明的除外。</span><br><span class="line">第三百五十三条　建设用地使用权人有权将建设用地使用权转让、互换、出资、赠与或者抵押，但是法律另有规定的除外。</span><br><span class="line">第三百五十四条　建设用地使用权转让、互换、出资、赠与或者抵押的，当事人应当采用书面形式订立相应的合同。使用期限由当事人约定，但是不得超过建设用地使用权的剩余期限。</span><br><span class="line">第三百五十五条　建设用地使用权转让、互换、出资或者赠与的，应当向登记机构申请变更登记。</span><br><span class="line">第三百五十六条　建设用地使用权转让、互换、出资或者赠与的，附着于该土地上的建筑物、构筑物及其附属设施一并处分。</span><br><span class="line">第三百五十七条　建筑物、构筑物及其附属设施转让、互换、出资或者赠与的，该建筑物、构筑物及其附属设施占用范围内的建设用地使用权一并处分。</span><br><span class="line"></span><br><span class="line">第三百五十八条　建设用地使用权期限届满前，因公共利益需要提前收回该土地的，应当依据本法第二百四十三条的规定对该土地上的房屋以及其他不动产给予补偿，并退还相应的出让金。</span><br><span class="line">第三百五十九条　住宅建设用地使用权期限届满的，自动续期。续期费用的缴纳或者减免，依照法律、行政法规的规定办理。</span><br><span class="line">非住宅建设用地使用权期限届满后的续期，依照法律规定办理。该土地上的房屋以及其他不动产的归属，有约定的，按照约定；没有约定或者约定不明确的，依照法律、行政法规的规定办理。</span><br><span class="line">第三百六十条　建设用地使用权消灭的，出让人应当及时办理注销登记。登记机构应当收回权属证书。</span><br><span class="line">第三百六十一条　集体所有的土地作为建设用地的，应当依照土地管理的法律规定办理。</span><br><span class="line">第十三章　宅基地使用权</span><br><span class="line">第三百六十二条　宅基地使用权人依法对集体所有的土地享有占有和使用的权利，有权依法利用该土地建造住宅及其附属设施。</span><br><span class="line">第三百六十三条　宅基地使用权的取得、行使和转让，适用土地管理的法律和国家有关规定。</span><br><span class="line">第三百六十四条　宅基地因自然灾害等原因灭失的，宅基地使用权消灭。对失去宅基地的村民，应当依法重新分配宅基地。建设用地使用权是指由国家或集体出让或划拨给使用者在一定期间内对特定土地进行建设、开发和利用的权利。根据中华人民共和国民法典的相关规定，建设用地使用权的具体内容包括：</span><br><span class="line"></span><br><span class="line">1. **设立方式**：建设用地使用权可以通过出让或划拨的方式设立，且出让方式一般使用公开招标、拍卖等方式，特别是对于经营性用地。</span><br><span class="line"></span><br><span class="line">2. **合同内容**：建设用地使用权出让合同应包含当事人的信息、土地界址、面积、用途、使用权期限、出让金等费用及解决争议的方法。</span><br><span class="line"></span><br><span class="line">3. **登记**：建设用地使用权需向登记机构申请登记，登记后方可正式设立，并会发放权属证书。</span><br><span class="line"></span><br><span class="line">4. **合理利用和用途变更**：使用权人应合理利用土地，不得擅自改变土地用途，如需变更需经过相关行政部门的批准。</span><br><span class="line"></span><br><span class="line">5. **转让和抵押**：建设用地使用权人有权转让、出资、赠与或抵押该使用权，但需遵守法律规定。</span><br><span class="line"></span><br><span class="line">6. **使用权期限**：住宅建设用地使用权在期限届满后可以自动续期，而非住宅用地的续期则需依法办理。</span><br><span class="line"></span><br><span class="line">7. **补偿机制**：如因公共利益需要收回土地，建设用地使用权人有权获得相应的补偿。</span><br><span class="line"></span><br><span class="line">上述内容为建设用地使用权的基本信息和法律规定。</span><br><span class="line"></span><br><span class="line">&gt; Finished chain.</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">&#x27;input&#x27;</span>: <span class="string">&#x27;建设用地使用权是什么&#x27;</span>,</span><br><span class="line"> <span class="string">&#x27;output&#x27;</span>: <span class="string">&#x27;建设用地使用权是指由国家或集体出让或划拨给使用者在一定期间内对特定土地进行建设、开发和利用的权利。根据中华人民共和国民法典的相关规定，建设用地使用权的具体内容包括：\n\n1. **设立方式**：建设用地使用权可以通过出让或划拨的方式设立，且出让方式一般使用公开招标、拍卖等方式，特别是对于经营性用地。\n\n2. **合同内容**：建设用地使用权出让合同应包含当事人的信息、土地界址、面积、用途、使用权期限、出让金等费用及解决争议的方法。\n\n3. **登记**：建设用地使用权需向登记机构申请登记，登记后方可正式设立，并会发放权属证书。\n\n4. **合理利用和用途变更**：使用权人应合理利用土地，不得擅自改变土地用途，如需变更需经过相关行政部门的批准。\n\n5. **转让和抵押**：建设用地使用权人有权转让、出资、赠与或抵押该使用权，但需遵守法律规定。\n\n6. **使用权期限**：住宅建设用地使用权在期限届满后可以自动续期，而非住宅用地的续期则需依法办理。\n\n7. **补偿机制**：如因公共利益需要收回土地，建设用地使用权人有权获得相应的补偿。\n\n上述内容为建设用地使用权的基本信息和法律规定。&#x27;</span>&#125;</span><br></pre></td></tr></table></figure></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://cryingatnight.github.io">Yinjin Yao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://cryingatnight.github.io/2025/09/26/LangChain%E4%BD%BF%E7%94%A8%E6%A6%82%E8%BF%B0/">https://cryingatnight.github.io/2025/09/26/LangChain%E4%BD%BF%E7%94%A8%E6%A6%82%E8%BF%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://cryingatnight.github.io" target="_blank">Yinjin Yao的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/LangChain/">LangChain</a></div><div class="post-share"><div class="social-share" data-image="/img/lita5.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/09/23/chromadb%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/" title="chromadb向量数据库"><img class="cover" src="/img/%E4%BA%94%E6%9D%A1%E6%82%9F.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">chromadb向量数据库</div></div><div class="info-2"><div class="info-item-1"> chromadb官方地址:https://docs.trychroma.com/docs/overview/introduction 本文大部分内容地址 GitHub 仓库: https://github.com/chroma-core/chroma 查看 Issues和Discussions。 # 基本介绍 ## 什么是矢量存储？ 向量存储是专门为有效地存储和检索向量嵌入而设计的数据库。之所以需要它们，是因为像 SQL 这样的传统数据库没有针对存储和查询大型向量数据进行优化。  嵌入在高维空间中以数字向量格式表示数据（通常是非结构化数据，如文本）。传统的关系数据库不太适合存储和搜索这些向量表示。 向量存储可以使用相似性算法对相似的向量进行索引和快速搜索。它允许应用程序在给定目标向量查询的情况下查找相关向量。 在个性化聊天机器人的情况下，用户输入生成式 AI 模型的提示。然后，该模型使用相似性搜索算法在文档集合中搜索相似文本。然后，由此产生的信息用于生成高度个性化和准确的响应。这是通过在向量存储中嵌入和向量索引来实现的。 ## 什么是ChromaDB？ Chro...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/headimage.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Yinjin Yao</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/cryingatnight/cryingatnight.github.io"><i class="fab fa-github"></i><span>关注</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/cryingatnight/cryingatnight.github.io" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:1816192779@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#langchain%E4%BD%BF%E7%94%A8%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">LangChain使用概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#langchain%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.1.</span> <span class="toc-text">LangChain的使用场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#langchain%E8%B5%84%E6%96%99%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.2.</span> <span class="toc-text">LangChain资料介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.3.</span> <span class="toc-text">架构设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84%E5%9B%BE"><span class="toc-number">1.3.1.</span> <span class="toc-text">总体架构图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E6%9E%B6%E6%9E%84%E8%AF%A6%E6%83%85"><span class="toc-number">1.3.2.</span> <span class="toc-text">内部架构详情</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E5%89%8D%E7%9A%84%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">2.</span> <span class="toc-text">开发前的准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86"><span class="toc-number">2.1.</span> <span class="toc-text">前置知识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85"><span class="toc-number">2.2.</span> <span class="toc-text">相关环境安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85python%E6%88%96anaconda"><span class="toc-number">2.2.1.</span> <span class="toc-text">安装Python或Anaconda</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85"><span class="toc-number">2.2.2.</span> <span class="toc-text">如何下载安装包</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91"><span class="toc-number">3.</span> <span class="toc-text">大模型应用开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Erag%E6%9E%B6%E6%9E%84%E7%9A%84%E5%BC%80%E5%8F%91"><span class="toc-number">3.1.</span> <span class="toc-text">基于RAG架构的开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%95%E4%B8%BArag"><span class="toc-number">3.2.</span> <span class="toc-text">何为RAG？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9"><span class="toc-number">3.3.</span> <span class="toc-text">如何选择</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#langchain%E7%9A%84%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6"><span class="toc-number">4.</span> <span class="toc-text">LangChain的核心组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E9%97%AE%E9%A2%98%E5%BC%95%E5%8F%91%E7%9A%84%E6%80%9D%E8%80%83"><span class="toc-number">4.1.</span> <span class="toc-text">一个问题引发的思考</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%E7%9A%84%E6%A6%82%E8%BF%B0"><span class="toc-number">4.2.</span> <span class="toc-text">核心组件的概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%E7%9A%84%E8%AF%B4%E6%98%8E"><span class="toc-number">4.3.</span> <span class="toc-text">核心组件的说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B61model-io"><span class="toc-number">4.3.1.</span> <span class="toc-text">核心组件1：Model I&#x2F;O</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B62chains"><span class="toc-number">4.3.2.</span> <span class="toc-text">核心组件2：Chains</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B63memory"><span class="toc-number">4.3.3.</span> <span class="toc-text">核心组件3：Memory</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B64agents"><span class="toc-number">4.3.4.</span> <span class="toc-text">核心组件4：Agents</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B65retrieval"><span class="toc-number">4.3.5.</span> <span class="toc-text">核心组件5：Retrieval</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B66callbacks"><span class="toc-number">4.3.6.</span> <span class="toc-text">核心组件6：Callbacks</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#langchain%E7%9A%84helloworld"><span class="toc-number">5.</span> <span class="toc-text">LangChain的helloworld</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%A4%A7%E6%A8%A1%E5%9E%8B"><span class="toc-number">5.1.</span> <span class="toc-text">获取大模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%8F%90%E7%A4%BA%E8%AF%8D%E6%A8%A1%E6%9D%BF"><span class="toc-number">5.2.</span> <span class="toc-text">使用提示词模板</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%BE%93%E5%87%BA%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-number">5.3.</span> <span class="toc-text">使用输出解析器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8"><span class="toc-number">5.4.</span> <span class="toc-text">使用向量存储</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rag%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90"><span class="toc-number">5.5.</span> <span class="toc-text">RAG(检索增强生成)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8agent"><span class="toc-number">5.6.</span> <span class="toc-text">使用Agent</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/09/26/LangChain%E4%BD%BF%E7%94%A8%E6%A6%82%E8%BF%B0/" title="LangChain使用概述"><img src="/img/lita5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LangChain使用概述"/></a><div class="content"><a class="title" href="/2025/09/26/LangChain%E4%BD%BF%E7%94%A8%E6%A6%82%E8%BF%B0/" title="LangChain使用概述">LangChain使用概述</a><time datetime="2025-09-26T03:37:36.148Z" title="更新于 2025-09-26 11:37:36">2025-09-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/23/chromadb%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/" title="chromadb向量数据库"><img src="/img/%E4%BA%94%E6%9D%A1%E6%82%9F.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="chromadb向量数据库"/></a><div class="content"><a class="title" href="/2025/09/23/chromadb%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/" title="chromadb向量数据库">chromadb向量数据库</a><time datetime="2025-09-23T16:37:51.853Z" title="更新于 2025-09-24 00:37:51">2025-09-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/19/%E9%80%90%E5%B1%82%E5%88%86%E8%A7%A3Transformer/" title="逐层分解Transformer"><img src="/img/lita8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="逐层分解Transformer"/></a><div class="content"><a class="title" href="/2025/09/19/%E9%80%90%E5%B1%82%E5%88%86%E8%A7%A3Transformer/" title="逐层分解Transformer">逐层分解Transformer</a><time datetime="2025-09-22T06:53:55.325Z" title="更新于 2025-09-22 14:53:55">2025-09-22</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2025 By Yinjin Yao</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.2</a></span></div><div class="footer_custom_text">感谢阅读</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="输入以搜索内容..." type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>