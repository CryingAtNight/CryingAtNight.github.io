<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Dify教程 | Yinjin Yao的博客</title><meta name="author" content="Yinjin Yao"><meta name="copyright" content="Yinjin Yao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本文纯属是搬运工，原文来自-光聚客网络科技 # Dify系列课程  Lecture：邓澎波   image-20250312145223729  一、Dify的介绍 https:&#x2F;&#x2F;dify.ai&#x2F; ​ Dify 是一款创新的智能生活助手应用，旨在为您提供便捷、高效的服务。通过人工智能技术，Dify 可以实现语音助手、智能家居控制、日程管理等功能，助您轻松应对生活琐事，享受智慧生">
<meta property="og:type" content="article">
<meta property="og:title" content="Dify教程">
<meta property="og:url" content="https://cryingatnight.github.io/2025/09/14/Dify%E6%95%99%E7%A8%8B/index.html">
<meta property="og:site_name" content="Yinjin Yao的博客">
<meta property="og:description" content="本文纯属是搬运工，原文来自-光聚客网络科技 # Dify系列课程  Lecture：邓澎波   image-20250312145223729  一、Dify的介绍 https:&#x2F;&#x2F;dify.ai&#x2F; ​ Dify 是一款创新的智能生活助手应用，旨在为您提供便捷、高效的服务。通过人工智能技术，Dify 可以实现语音助手、智能家居控制、日程管理等功能，助您轻松应对生活琐事，享受智慧生">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cryingatnight.github.io/img/lita7.jpg">
<meta property="article:published_time" content="2025-09-14T04:00:00.000Z">
<meta property="article:modified_time" content="2025-09-14T08:35:36.138Z">
<meta property="article:author" content="Yinjin Yao">
<meta property="article:tag" content="Dify">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cryingatnight.github.io/img/lita7.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Dify教程",
  "url": "https://cryingatnight.github.io/2025/09/14/Dify%E6%95%99%E7%A8%8B/",
  "image": "https://cryingatnight.github.io/img/lita7.jpg",
  "datePublished": "2025-09-14T04:00:00.000Z",
  "dateModified": "2025-09-14T08:35:36.138Z",
  "author": [
    {
      "@type": "Person",
      "name": "Yinjin Yao",
      "url": "https://cryingatnight.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/headimage.png"><link rel="canonical" href="https://cryingatnight.github.io/2025/09/14/Dify%E6%95%99%E7%A8%8B/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Dify教程',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/headimage.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-flask"></i><span> 实验室</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="http://121.199.61.105/"><i class="fa-fw fas fa-q"></i><span> 豆瓣网开发</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://fuckornot.on.websim.com/"><i class="fa-fw fa fa-trophy"></i><span> 上不上AI评分系统</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://fontawesome.com/icons"><i class="fa-fw fa fa-check-circle"></i><span> font-awesome v6 图标</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/lita7.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/headimage.png" alt="Logo"><span class="site-name">Yinjin Yao的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">Dify教程</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-flask"></i><span> 实验室</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="http://121.199.61.105/"><i class="fa-fw fas fa-q"></i><span> 豆瓣网开发</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://fuckornot.on.websim.com/"><i class="fa-fw fa fa-trophy"></i><span> 上不上AI评分系统</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://fontawesome.com/icons"><i class="fa-fw fa fa-check-circle"></i><span> font-awesome v6 图标</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Dify教程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-09-14T04:00:00.000Z" title="发表于 2025-09-14 12:00:00">2025-09-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-09-14T08:35:36.138Z" title="更新于 2025-09-14 16:35:36">2025-09-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%99%E7%A8%8B/">教程</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>本文纯属是搬运工，原文来自-光聚客网络科技 # Dify系列课程</p>
<blockquote>
<p>Lecture：邓澎波</p>
</blockquote>
<figure>
<img src="image-20250312145223729.png" alt="image-20250312145223729" /><figcaption aria-hidden="true">image-20250312145223729</figcaption>
</figure>
<h1 id="一dify的介绍">一、Dify的介绍</h1>
<p>https://dify.ai/</p>
<p>​ Dify 是一款创新的智能生活助手应用，旨在为您提供便捷、高效的服务。通过人工智能技术，Dify 可以实现语音助手、智能家居控制、日程管理等功能，助您轻松应对生活琐事，享受智慧生活。简约的界面设计，让操作更加便捷；丰富的应用场景，满足您多样化的需求。Dify，让生活更简单！</p>
<h1 id="二dify的安装方式">二、Dify的安装方式</h1>
<h2 id="在线体验">1. 在线体验</h2>
<p>​ 速度比较慢。不推荐</p>
<h2 id="本地部署">2. 本地部署</h2>
<h3 id="docker安装">2.1 Docker安装</h3>
<p>​ 安装Docker环境</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sSl https://cdn.jsdelivr.<span class="built_in">net</span>/gh/SuperManito/LunuxMirrors@main/DockerInstallation.sh)</span><br></pre></td></tr></table></figure>
<p>安装Docker Compose</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L &quot;https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose &amp;&amp; chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>
<p>执行查看Docker-compose版本</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure>
<figure>
<img src="image-20250306174134895.png" alt="image-20250306174134895" /><figcaption aria-hidden="true">image-20250306174134895</figcaption>
</figure>
<p>说明安装成功了</p>
<p>docker-compse拉取镜像很慢</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">     &quot;registry-mirrors&quot;: [</span><br><span class="line">         &quot;https://<span class="keyword">do</span>.nark.eu.org&quot;,</span><br><span class="line">         &quot;https://dc.j8.work&quot;,</span><br><span class="line">         &quot;https://docker.m.daocloud.io&quot;,</span><br><span class="line">         &quot;https://dockerproxy.com&quot;,</span><br><span class="line">         &quot;https://docker.mirrors.ustc.edu.cn&quot;,</span><br><span class="line">         &quot;https://docker.nju.edu.cn&quot;</span><br><span class="line">     ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>执行上面的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload    # 重新加载 systemd 的配置文件</span><br><span class="line">systemctl restart docker        # 重启docker</span><br></pre></td></tr></table></figure>
<p>然后去GitHub上拉取dify的代码。解压后进入到docker目录中</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>
<p>执行即可</p>
<h3 id="dockerdesktop">2.2 DockerDeskTop</h3>
<p>​ 在Windows环境下我们可以通过DockerDesktop 来安装。直接去官网下载对应的版本即可。同样的我们需要拉取dify的GitHub的代码。然后进入到Docker目录，同样的执行这个代码</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up </span><br></pre></td></tr></table></figure>
<figure>
<img src="image-20250306212234636.png" alt="image-20250306212234636" /><figcaption aria-hidden="true">image-20250306212234636</figcaption>
</figure>
<p>然后在地址栏中输入 http://localhost/install 就可以访问了</p>
<figure>
<img src="image-20250306212309113.png" alt="image-20250306212309113" /><figcaption aria-hidden="true">image-20250306212309113</figcaption>
</figure>
<p>我们先设置管理员的相关信息。设置后再登录</p>
<figure>
<img src="image-20250306212421636.png" alt="image-20250306212421636" /><figcaption aria-hidden="true">image-20250306212421636</figcaption>
</figure>
<h2 id="ollama">3. Ollama</h2>
<p>​ https://ollama.com/</p>
<p>​ 我们已经把Dify在本地部署了。然后我们可以通过Ollama在本地部署对应的大模型，比如 deepseek-r1:1.5b 这种小模型</p>
<p>Ollama 是一个让你能在本地运行大语言模型的工具，为用户在本地环境使用和交互大语言模型提供了便利，具有以下特点：</p>
<p>1）多模型支持：Ollama 支持多种大语言模型，比如 Llama 2、Mistral 等。这意味着用户可以根据自己的需求和场景，选择不同的模型来完成各种任务，如文本生成、问答系统、对话交互等。</p>
<p>2）易于安装和使用：它的安装过程相对简单，在 macOS、Linux 和 Windows 等主流操作系统上都能方便地部署。用户安装完成后，通过简洁的命令行界面就能与模型进行交互，降低了使用大语言模型的技术门槛。</p>
<p>3）本地运行：Ollama 允许模型在本地设备上运行，无需依赖网络连接来访问云端服务。这不仅提高了数据的安全性和隐私性，还能减少因网络问题导致的延迟，实现更快速的响应。</p>
<p>搜索Ollama进入官网https://ollama.com/download，选择安装MAC版本的安装包，点击安装即可</p>
<figure>
<img src="image-20250306221527312.png" alt="image-20250306221527312" /><figcaption aria-hidden="true">image-20250306221527312</figcaption>
</figure>
<p>下载完成后直接双击安装即可</p>
<p>命令：ollama,出现下面内容，说明安装成功</p>
<figure>
<img src="image-20250306221605717.png" alt="image-20250306221605717" /><figcaption aria-hidden="true">image-20250306221605717</figcaption>
</figure>
<p>启动Ollama服务</p>
<p>输入命令【ollama serve】，浏览器打开，显示running，说明启动成功</p>
<figure>
<img src="image-20250306221646777.png" alt="image-20250306221646777" /><figcaption aria-hidden="true">image-20250306221646777</figcaption>
</figure>
<p>安装 deepseek-r1:1.5b模型</p>
<p>在https://ollama.com/library/deepseek-r1:1.5b 搜索deepseek-R1,跳转到下面的页面，复制这个命令，在终端执行，下载模型</p>
<figure>
<img src="image-20250306221723308.png" alt="image-20250306221723308" /><figcaption aria-hidden="true">image-20250306221723308</figcaption>
</figure>
<p>cmd中执行这个命令</p>
<figure>
<img src="image-20250306221746525.png" alt="image-20250306221746525" /><figcaption aria-hidden="true">image-20250306221746525</figcaption>
</figure>
<h2 id="dify关联ollama">4.Dify关联Ollama</h2>
<p>​ Dify 是通过Docker部署的，而Ollama 是运行在本地电脑的，得让Dify能访问Ollama 的服务。</p>
<p>在Dify项目-docker-找到.env文件，在末尾加上下面的配置：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 启用自定义模型</span><br><span class="line">CUSTOM_MODEL_ENABLED=true</span><br><span class="line"># 指定 Olama 的 API地址（根据部署环境调整IP）</span><br><span class="line">OLLAMA_API_BASE_URL=host.docker.internal:<span class="number">11434</span></span><br></pre></td></tr></table></figure>
<p>然后在模型中配置</p>
<p>在Dify的主界面 http://localhost/apps ，点击右上角用户名下的【设置】</p>
<figure>
<img src="image-20250306221924386.png" alt="image-20250306221924386" /><figcaption aria-hidden="true">image-20250306221924386</figcaption>
</figure>
<p>在设置页面–Ollama–添加模型，如下：</p>
<figure>
<img src="image-20250306222028793.png" alt="image-20250306222028793" /><figcaption aria-hidden="true">image-20250306222028793</figcaption>
</figure>
<p>添加成功后的</p>
<figure>
<img src="image-20250306222058087.png" alt="image-20250306222058087" /><figcaption aria-hidden="true">image-20250306222058087</figcaption>
</figure>
<p>模型添加完成以后，刷新页面，进行系统模型设置。步骤：输入“<strong>http://localhost/install</strong>”进入Dify主页，用户名–设置–模型供应商，点击右侧【系统模型设置】，如下：</p>
<figure>
<img src="image-20250306222146832.png" alt="image-20250306222146832" /><figcaption aria-hidden="true">image-20250306222146832</figcaption>
</figure>
<p>这样就关联成功了！！！</p>
<h1 id="三dify应用讲解">三、Dify应用讲解</h1>
<h2 id="创建空白应用">1. 创建空白应用</h2>
<p>我们通过Dify来创建我们的第一个简单案例，智能聊天机器人</p>
<p>进入Dify 主界面，点击【创建空白应用】，如下图：</p>
<figure>
<img src="image-20250306222313242.png" alt="image-20250306222313242" /><figcaption aria-hidden="true">image-20250306222313242</figcaption>
</figure>
<p>选择【聊天助手】，输入自定义应用名称和描述，点击【创建】</p>
<figure>
<img src="image-20250306222340735.png" alt="image-20250306222340735" /><figcaption aria-hidden="true">image-20250306222340735</figcaption>
</figure>
<p>右上角选择合适的模型，进行相关的参数配置</p>
<figure>
<img src="image-20250306222529611.png" alt="image-20250306222529611" /><figcaption aria-hidden="true">image-20250306222529611</figcaption>
</figure>
<p>输入有相关的回复了。此时说明Dify 与本地部署的DeepSeek大模型已经连通了。</p>
<figure>
<img src="image-20250306222759806.png" alt="image-20250306222759806" /><figcaption aria-hidden="true">image-20250306222759806</figcaption>
</figure>
<p>上面的机器人有个不足之处就是无法回答模型训练后的内容和专业垂直领域的内容，这时我们可以借助本地知识库来解决专业领域的问题。</p>
<h2 id="创建本地知识库">2. 创建本地知识库</h2>
<h3 id="向量模型">2.1 向量模型</h3>
<pre><code>Embedding模型是一种将数据转换为向量表示的技术，核心思想是通过学习数据的内在结构和语义信息，将其映射到一个低维向量空间中，使得相似的数据点在向量空间中的位置相近，从而通过计算向量之间的相似度来衡量数据之间的相似性。

Embedding模型可以将单词、句子或图像等数据转换为低维向量，使得计算机能够更好地理解和处理这些数据。在NLP领域，Embedding模型可以将单词、句子或文档转换为向量，用于文本分类、情感分析。机器翻译等任务。在计算机视觉中，Embedding模型可以用于图像识别和检索等任务。</code></pre>
<h3 id="添加embedding模型">2.2 添加Embedding模型</h3>
<p>点击右上角用户名–设置–模型供应商–右上角【添加模型】，填写相关配置信息如下：</p>
<figure>
<img src="image-20250307141101128.png" alt="image-20250307141101128" /><figcaption aria-hidden="true">image-20250307141101128</figcaption>
</figure>
<p>添加成功后的效果</p>
<figure>
<img src="image-20250307141140053.png" alt="image-20250307141140053" /><figcaption aria-hidden="true">image-20250307141140053</figcaption>
</figure>
<h3 id="创建知识库">2.3 创建知识库</h3>
<p>在Dify主界面，点击上方的【知识库】，点击【创建知识库】</p>
<figure>
<img src="image-20250307141231496.png" alt="image-20250307141231496" /><figcaption aria-hidden="true">image-20250307141231496</figcaption>
</figure>
<p>导入已有文本，上传资料，点击【下一步】</p>
<figure>
<img src="image-20250307141412744.png" alt="image-20250307141412744" /><figcaption aria-hidden="true">image-20250307141412744</figcaption>
</figure>
<p>Embedding模型默认是前面配置的模型，参数信息配置完，点击保存即可</p>
<figure>
<img src="image-20250307142154186.png" alt="image-20250307142154186" /><figcaption aria-hidden="true">image-20250307142154186</figcaption>
</figure>
<figure>
<img src="image-20250307142303981.png" alt="image-20250307142303981" /><figcaption aria-hidden="true">image-20250307142303981</figcaption>
</figure>
<p>此时系统会自动对上传的文档进行解析和向量化处理，需要耐心等待几分钟。</p>
<figure>
<img src="image-20250307142346321.png" alt="image-20250307142346321" /><figcaption aria-hidden="true">image-20250307142346321</figcaption>
</figure>
<p>创建成功以后，如下图，可以点击【前往文档】，查看分段信息，如下图：</p>
<figure>
<img src="image-20250307142549843.png" alt="image-20250307142549843" /><figcaption aria-hidden="true">image-20250307142549843</figcaption>
</figure>
<p>点击具体的文档可以看到具体的分割信息</p>
<figure>
<img src="image-20250307142703684.png" alt="image-20250307142703684" /><figcaption aria-hidden="true">image-20250307142703684</figcaption>
</figure>
<h2 id="知识库应用">3. 知识库应用</h2>
<h3 id="添加知识库">3.1 添加知识库</h3>
<p>​ 在Dify主界面，回到刚才的应用聊天页面，工作室–智能聊天机器人–添加知识库，如下图： <img src="image-20250307143412619.png" alt="image-20250307143412619" /></p>
<p>选择前面上面的知识库作为对话的上下文，保存当前应用设置，就可以进行测试了</p>
<figure>
<img src="image-20250307143438471.png" alt="image-20250307143438471" /><figcaption aria-hidden="true">image-20250307143438471</figcaption>
</figure>
<h3 id="测试">3.2 测试</h3>
<p>此时输入问题，就可以看到相关的回复了。</p>
<figure>
<img src="image-20250307144032785.png" alt="image-20250307144032785" /><figcaption aria-hidden="true">image-20250307144032785</figcaption>
</figure>
<h2 id="ai图片生成工具">4. AI图片生成工具</h2>
<p>​ 随着图像生成技术的兴起，涌现了许多优秀的图像生成产品，比如 Dall-e、Flux、Stable Diffusion 等，我们借助Stable Diffusion来在dify中构建一个智能生成图片的Agent。</p>
<h3 id="首先获取stable-diffusion">4.1 首先获取Stable Diffusion</h3>
<p>https://platform.stability.ai/account/keys 去官网获取授权key。如果没注册需要先注册下</p>
<figure>
<img src="image-20250308125207283.png" alt="image-20250308125207283" /><figcaption aria-hidden="true">image-20250308125207283</figcaption>
</figure>
<h3 id="下载-stable-工具">4.2 下载 Stable 工具</h3>
<p>然后我们需要进入dify的工具市场下载安装 Stable 插件。</p>
<figure>
<img src="image-20250308125450441.png" alt="image-20250308125450441" /><figcaption aria-hidden="true">image-20250308125450441</figcaption>
</figure>
<h3 id="创建agent">4.3 创建Agent</h3>
<p>​ 然后我们就可以创建一个空白的Agent。输入对应的提示词</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">根据用户的提示，使用工具 stability_text2image 绘画指定内容</span><br></pre></td></tr></table></figure>
<p>然后选择对应的工具并添加授权码</p>
<figure>
<img src="image-20250308130638015.png" alt="image-20250308130638015" /><figcaption aria-hidden="true">image-20250308130638015</figcaption>
</figure>
<figure>
<img src="image-20250308130704143.png" alt="image-20250308130704143" /><figcaption aria-hidden="true">image-20250308130704143</figcaption>
</figure>
<p>然后我们就可以测试效果了</p>
<figure>
<img src="image-20250308131003848.png" alt="image-20250308131003848" /><figcaption aria-hidden="true">image-20250308131003848</figcaption>
</figure>
<p>注意这个是一个付费的工具。提供的有一个免费的，后面需要付费购买了：https://platform.stability.ai/account/credits</p>
<h2 id="旅游助手">5. 旅游助手</h2>
<p>进入<a target="_blank" rel="noopener" href="https://serpapi.com/manage-api-key">SerpAPI - API Key</a>，如果你尚未注册，会被跳转至进入注册页。</p>
<p>SerpAPI提供一个月100次的免费调用次数，这足够我们完成本次实验了。如果你需要更多的额度，可以增加余额，或者使用其他的开源方案。</p>
<figure>
<img src="image-20250311000951025.png" alt="image-20250311000951025" /><figcaption aria-hidden="true">image-20250311000951025</figcaption>
</figure>
<h2 id="sql执行器">6. SQL执行器</h2>
<p>​ 我们可以通过工作流来创建一个SQL语句的执行器，也就是我们可以输入相关的SQL语句然后通过工作流来连接数据库执行对应的SQL代码，具体的设计如下：</p>
<figure>
<img src="image-20250310204012382.png" alt="image-20250310204012382" /><figcaption aria-hidden="true">image-20250310204012382</figcaption>
</figure>
<p>​ 这里的核心是代码执行模块。这块我们是调用了我们自己创建的接口来执行数据库的操作，所以我们需要先创建这么一个接口，接口我们通过Flask这个轻量的web框架来实现。需要先安装Flask的依赖库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install flask</span><br></pre></td></tr></table></figure>
<p>然后创建接口代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, jsonify</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">execute_sql</span>(<span class="params">sql,connection_info</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    执行传入的 SQL 语句，并返回查询结果。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    参数:</span></span><br><span class="line"><span class="string">        sql: 要执行的 SQL 语句（字符串）。</span></span><br><span class="line"><span class="string">        connection_info: 一个字典，包含数据库连接所需的信息：</span></span><br><span class="line"><span class="string">            - host: 数据库地址（如 &quot;localhost&quot;）</span></span><br><span class="line"><span class="string">            - user: 数据库用户名</span></span><br><span class="line"><span class="string">            - password: 数据库密码</span></span><br><span class="line"><span class="string">            - database: 数据库名称</span></span><br><span class="line"><span class="string">            - port: 数据库端口（可选，默认为 3306）</span></span><br><span class="line"><span class="string">            - charset: 字符编码（可选，默认为 &quot;utf8mb4&quot;）</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    返回:</span></span><br><span class="line"><span class="string">        如果执行的是 SELECT 查询，则返回查询结果的列表；</span></span><br><span class="line"><span class="string">        如果执行的是 INSERT/UPDATE/DELETE 等非查询语句，则提交事务并返回受影响的行数。</span></span><br><span class="line"><span class="string">        如果执行过程中出错，则返回 None。</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    connection = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 从 connection_info 中获取各项参数，设置默认值</span></span><br><span class="line">        host = connection_info.get(<span class="string">&quot;host&quot;</span>, <span class="string">&quot;localhost&quot;</span>)</span><br><span class="line">        user =  connection_info.get(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">        password = connection_info.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">        database = connection_info.get(<span class="string">&quot;database&quot;</span>)</span><br><span class="line">        port = connection_info.get(<span class="string">&quot;port&quot;</span>, <span class="number">3306</span>)</span><br><span class="line">        charset = connection_info.get(<span class="string">&quot;charset&quot;</span>, <span class="string">&quot;utf8mb4&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 建立数据库连接</span></span><br><span class="line">        connection = pymysql.connect(</span><br><span class="line">            host=host,</span><br><span class="line">            user=user,</span><br><span class="line">            password=password,</span><br><span class="line">            database=database,</span><br><span class="line">            port=port,</span><br><span class="line">            charset=charset,</span><br><span class="line">            cursorclass=pymysql.cursors.Cursor  <span class="comment"># 可改为 DictCursor 返回字典格式结果</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> connection.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            cursor.execute(sql)</span><br><span class="line">            <span class="comment"># 判断是否为 SELECT 查询语句</span></span><br><span class="line">            <span class="keyword">if</span> sql.strip().lower().startswith(<span class="string">&quot;select&quot;</span>):</span><br><span class="line">                result = cursor.fetchall()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                connection.commit()  <span class="comment"># 非查询语句需要提交事务</span></span><br><span class="line">                result = cursor.rowcount  <span class="comment"># 返回受影响的行数</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;执行 SQL 语句时出错：&quot;</span>, e)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="keyword">if</span> connection:</span><br><span class="line">            connection.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/execute_sql&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">execute_sql_api</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    接口示例：通过 POST 请求传入 SQL 语句和连接信息，返回执行结果。</span></span><br><span class="line"><span class="string">    请求示例 (JSON):</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        &quot;sql&quot;: &quot;SELECT * FROM your_table;&quot;,</span></span><br><span class="line"><span class="string">        &quot;connection_info&quot;: &#123;</span></span><br><span class="line"><span class="string">            &quot;host&quot;: &quot;localhost&quot;,</span></span><br><span class="line"><span class="string">            &quot;user&quot;: &quot;your_username&quot;,</span></span><br><span class="line"><span class="string">            &quot;password&quot;: &quot;your_password&quot;,</span></span><br><span class="line"><span class="string">            &quot;database&quot;: &quot;your_database&quot;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    data = request.get_json()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;无效的请求数据&quot;</span>&#125;), <span class="number">400</span></span><br><span class="line"></span><br><span class="line">    sql = data.get(<span class="string">&quot;sql&quot;</span>)</span><br><span class="line">    connection_info = data.get(<span class="string">&quot;connection_info&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> sql <span class="keyword">or</span> <span class="keyword">not</span> connection_info:</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;缺少sql语句或数据库连接信息&quot;</span>&#125;), <span class="number">400</span></span><br><span class="line"></span><br><span class="line">    result = execute_sql(sql, connection_info)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;result&quot;</span>: result&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 开发环境下可以设置 debug=True，默认在本地5000端口启动服务</span></span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>这个接口需要接收一个sql语句和一个包含数据库连接信息的json对象，我们可以编写对应的测试代码来看看</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">call_execute_sql_api</span>(<span class="params">sql, connection_info</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    通过 requests 调用执行 SQL 的接口服务</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    参数:</span></span><br><span class="line"><span class="string">        sql: 要执行的 SQL 语句字符串</span></span><br><span class="line"><span class="string">        connection_info: 数据库连接信息字典，例如：</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                &quot;host&quot;: &quot;localhost&quot;,</span></span><br><span class="line"><span class="string">                &quot;user&quot;: &quot;your_username&quot;,</span></span><br><span class="line"><span class="string">                &quot;password&quot;: &quot;your_password&quot;,</span></span><br><span class="line"><span class="string">                &quot;database&quot;: &quot;your_database&quot;,</span></span><br><span class="line"><span class="string">                &quot;port&quot;: 3306  # 可选</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    返回:</span></span><br><span class="line"><span class="string">        接口返回的结果数据（字典格式），如果请求失败则返回 None</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    url = <span class="string">&quot;http://127.0.0.1:5000/execute_sql&quot;</span></span><br><span class="line">    <span class="comment"># 构造请求体</span></span><br><span class="line">    payload = &#123;</span><br><span class="line">        <span class="string">&quot;sql&quot;</span>: sql,</span><br><span class="line">        <span class="string">&quot;connection_info&quot;</span>: connection_info</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = requests.post(url, json=payload, headers=headers)</span><br><span class="line">        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">return</span> &#123;<span class="string">&quot;result&quot;</span>:<span class="built_in">str</span>(response.json()[<span class="string">&quot;result&quot;</span>])&#125;</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="keyword">return</span> &#123;<span class="string">&quot;result&quot;</span>: <span class="string">f&quot;解析响应 JSON 失败: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>&#125;</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="string">&quot;result&quot;</span>: <span class="string">f&quot;请求失败，状态码: <span class="subst">&#123;response.status_code&#125;</span>&quot;</span>&#125;</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&quot;result&quot;</span>: <span class="built_in">str</span>(e)&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例调用</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    sql_query = <span class="string">&quot;select * from candidates where id = 1&quot;</span>  <span class="comment"># 替换为你的实际 SQL 语句</span></span><br><span class="line">    conn_info = &#123;</span><br><span class="line">        <span class="string">&quot;host&quot;</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">        <span class="string">&quot;user&quot;</span>: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">        <span class="string">&quot;password&quot;</span>: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;database&quot;</span>: <span class="string">&quot;ibms&quot;</span>,</span><br><span class="line">        <span class="string">&quot;port&quot;</span>: <span class="number">3306</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    result = call_execute_sql_api(sql_query, conn_info)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;接口返回结果：&quot;</span>, result)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>执行后可以看到对应的结果</p>
<figure>
<img src="image-20250310204413868.png" alt="image-20250310204413868" /><figcaption aria-hidden="true">image-20250310204413868</figcaption>
</figure>
<p>然后可以在工作流中来设置我们的代码</p>
<figure>
<img src="image-20250310204446218.png" alt="image-20250310204446218" /><figcaption aria-hidden="true">image-20250310204446218</figcaption>
</figure>
<p>代码的内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">sql: <span class="built_in">str</span></span>) -&gt; <span class="built_in">dict</span>:</span><br><span class="line">    url = <span class="string">&quot;http://host.docker.internal:5000/execute_sql&quot;</span></span><br><span class="line">    connection_info = &#123;</span><br><span class="line">        <span class="string">&quot;host&quot;</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">        <span class="string">&quot;user&quot;</span>: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">        <span class="string">&quot;password&quot;</span>: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;database&quot;</span>: <span class="string">&quot;ibms&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 构造请求体</span></span><br><span class="line">    payload = &#123;</span><br><span class="line">        <span class="string">&quot;sql&quot;</span>: sql,</span><br><span class="line">        <span class="string">&quot;connection_info&quot;</span>: connection_info</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = requests.post(url, json=payload, headers=headers)</span><br><span class="line">        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">return</span> &#123;<span class="string">&quot;result&quot;</span>:<span class="built_in">str</span>(response.json()[<span class="string">&quot;result&quot;</span>])&#125;</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="keyword">return</span> &#123;<span class="string">&quot;result&quot;</span>: <span class="string">f&quot;解析响应 JSON 失败: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>&#125;</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="string">&quot;result&quot;</span>: <span class="string">f&quot;请求失败，状态码: <span class="subst">&#123;response.status_code&#125;</span>&quot;</span>&#125;</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&quot;result&quot;</span>: <span class="built_in">str</span>(e)&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>注意上面的url中我们需要写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://host.docker.internal:5000/execute_sql</span><br></pre></td></tr></table></figure>
<p>不然执行的时候会出现503的错误。</p>
<figure>
<img src="image-20250310204606561.png" alt="image-20250310204606561" /><figcaption aria-hidden="true">image-20250310204606561</figcaption>
</figure>
<p>如果调用接口的组件是 urllib3 的话有可能出现上面的问题，这个原因可能是版本兼容的问题，这里推进用的是requests组件</p>
<h2 id="科研论文翻译">7. 科研论文翻译</h2>
<p>​ 我可以在工作流案例中结合聊天大模型来实现翻译工具的功能，具体的设计如下</p>
<figure>
<img src="image-20250311150702514.png" alt="image-20250311150702514" /><figcaption aria-hidden="true">image-20250311150702514</figcaption>
</figure>
<p>在开始节点中接收一个输入信息<code>content</code></p>
<p>然后在LLM模型中我们需要配置一个CHAT模型，这里选择了DeepSeek-R1 64K的聊天模型，注意需要在这里设置下对应的提示词</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">现在我要写一个将中文翻译成英文科研论文的GPT，请参照以下Prompt制作，注意都用英文生成：</span><br><span class="line"></span><br><span class="line">## 角色</span><br><span class="line">你是一位科研论文审稿员，擅长写作高质量的英文科研论文。请你帮我准确且学术性地将以下中文翻译成英文，风格与英文科研论文保持一致。</span><br><span class="line"></span><br><span class="line">## 规则：</span><br><span class="line">- 输入格式为 Markdown 格式，输出格式也必须保留原始 Markdown 格式</span><br><span class="line">- 以下是常见的相关术语词汇对应表（中文 -&gt; English）：</span><br><span class="line">* 零样本 -&gt; Zero-shot</span><br><span class="line">* 少样本 -&gt; Few-shot</span><br><span class="line"></span><br><span class="line">## 策略：</span><br><span class="line"></span><br><span class="line">分三步进行翻译工作，并打印每步的结果：</span><br><span class="line">1. 根据中文内容直译成英文，保持原有格式，不要遗漏任何信息</span><br><span class="line">2. 根据第一步直译的结果，指出其中存在的具体问题，要准确描述，不宜笼统的表示，也不需要增加原文不存在的内容或格式，包括不仅限于：</span><br><span class="line">- 不符合英文表达习惯，明确指出不符合的地方</span><br><span class="line">- 语句不通顺，指出位置，不需要给出修改意见，意译时修复</span><br><span class="line">- 晦涩难懂，模棱两可，不易理解，可以尝试给出解释</span><br><span class="line">3. 根据第一步直译的结果和第二步指出的问题，重新进行意译，保证内容的原意的基础上，使其更易于理解，更符合英文科研论文的表达习惯，同时保持原有的格式不变</span><br><span class="line"></span><br><span class="line">## 格式</span><br><span class="line">返回格式如下，&quot;&#123;xxx&#125;&quot;表示占位符：</span><br><span class="line"></span><br><span class="line">### 直译</span><br><span class="line">&#123;直译结果&#125;</span><br><span class="line"></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line">###问题</span><br><span class="line">&#123;直译的具体问题列表&#125;</span><br><span class="line"></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line">###意译</span><br></pre></td></tr></table></figure>
<figure>
<img src="image-20250311152200170.png" alt="image-20250311152200170" /><figcaption aria-hidden="true">image-20250311152200170</figcaption>
</figure>
<p>在结束节点中输出结果即可。</p>
<p>数据中的中文课研论文案例</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 农业生产中作物栽培技术的创新与应用</span><br><span class="line">## 摘要</span><br><span class="line">本文针对我国农业生产中作物栽培技术存在的问题，分析了技术创新的必要性，并探讨了新型栽培技术的应用效果。通过实验研究发现，采用新型栽培技术能够有效提高作物产量和品质，为我国农业生产提供有力支持。</span><br><span class="line">## 一、引言</span><br><span class="line">农业生产是我国国民经济的重要组成部分，作物栽培技术直接关系到粮食产量和农业可持续发展。近年来，我国农业生产取得了显著成果，但仍然存在一些问题，如资源利用率低、生态环境恶化等。因此，创新作物栽培技术，提高农业生产效益具有重要意义。</span><br><span class="line">## 二、作物栽培技术创新的必要性</span><br><span class="line">1. 提高资源利用率：我国农业生产过程中，水资源、化肥和农药的利用率较低，导致资源浪费和生态环境恶化。创新栽培技术，有助于提高资源利用率，降低农业生产成本。</span><br><span class="line">2. 保障粮食安全：随着人口增长和耕地减少，提高单位面积产量成为保障粮食安全的关键。作物栽培技术创新有助于挖掘作物增产潜力，提高粮食产量。</span><br><span class="line">3. 促进农业可持续发展：传统农业生产方式对生态环境造成一定程度的影响。创新栽培技术，有利于实现农业生产与生态环境的协调发展。</span><br><span class="line">## 三、新型作物栽培技术的应用</span><br><span class="line">1. 精准农业技术：通过无人机、卫星遥感等手段，实时监测作物生长状况，实现精准施肥、灌溉和病虫害防治。</span><br><span class="line">2. 节水灌溉技术：采用滴灌、喷灌等节水灌溉方式，提高水资源利用率，降低农业生产成本。</span><br><span class="line">3. 抗逆性品种选育：针对我国不同地区气候特点，选育抗逆性强的作物品种，提高作物产量和品质。</span><br><span class="line">4. 生物有机肥应用：充分利用农业废弃物，发展生物有机肥，改善土壤结构，提高土壤肥力。</span><br><span class="line">## 四、实验结果与分析</span><br><span class="line">本研究以某地区小麦为例，对比分析了传统栽培技术与新型栽培技术下的产量和品质。实验结果表明，采用新型栽培技术的小麦产量较传统栽培技术提高了15.6%，品质也得到了显著提升。</span><br><span class="line">## 五、结论</span><br><span class="line">本文通过对农业生产中作物栽培技术的创新与应用研究，证实了新型栽培技术在提高作物产量和品质方面具有显著效果。未来，我国农业生产应继续加大科技创新力度，推动农业可持续发展。</span><br><span class="line">（注：本文为示例性论文，仅供参考。）</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>效果图</p>
<figure>
<img src="image-20250311150957460.png" alt="image-20250311150957460" /><figcaption aria-hidden="true">image-20250311150957460</figcaption>
</figure>
<h2 id="seo翻译">8. SEO翻译</h2>
<p>​ 我们在写文章的时候需要想一个满足SEO要求的标题，这样有可能被更多的人检索到，有时候我们可能需要把文章翻译为英文，这时标题同样比较重要，这时我们可以在dify中创建这样的一个工具来帮助我们实现这个功能。</p>
<figure>
<img src="image-20250311162812905.png" alt="image-20250311162812905" /><figcaption aria-hidden="true">image-20250311162812905</figcaption>
</figure>
<p>对应模型的提示词</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This GPT will convert input titles or content into SEO-friendly English URL slugs. The slugs will clearly convey the original meaning while being concise and not exceeding 60 characters. If the input content is too long, the GPT will first condense it into an English phrase within 60 characters before generating the slug. If the title is too short, the GPT will prompt the user to input a longer title. Special characters in the input will be directly removed.</span><br></pre></td></tr></table></figure>
<p>对应中文含义</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这个GPT可以将输入的标题或内容转换为对SEO友好的英文URL片段。这些片段将清晰地传达原始含义，同时保持简洁，且不超过60个字符。如果输入内容过长，GPT将首先将其缩减为一个不超过60个字符的英文短语，然后生成片段。如果标题过短，GPT将提示用户输入更长的标题。输入中的特殊字符将被直接移除。</span><br></pre></td></tr></table></figure>
<h2 id="标题党">9. 标题党</h2>
<p>​ 有时候我们发表一些文章的时候，因为标题不够吸引人而造成没有什么关注度还是非常可惜的，这时我们可以借助AI来帮助我们生成有吸引力的标题，具体如下</p>
<figure>
<img src="image-20250311173657192.png" alt="image-20250311173657192" /><figcaption aria-hidden="true">image-20250311173657192</figcaption>
</figure>
<p>核心是对应的提示词</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">你是一名资深的自媒体创作者也是一位爆款网文作家，你对不同领域的文章都有深入的了解和研究。你擅长创作吸睛、炸裂的标题创作。你有着对生活极为细致的观察，擅长在细节处触动人心。请根据用户提供的信息使用以下创作技巧进行标题创作，标题应具有吸引力，能够激发读者对文章主题的浓厚兴趣。</span><br><span class="line">## 创作技巧</span><br><span class="line">1.标题将感受、范围、结果、程度等夸张夸大描述，造成耸人听闻的效果。使用「震惊」、「惊爆」、「传疯」、「吓掉半条命」等，言过其实地表达情绪/状态/感受</span><br><span class="line"></span><br><span class="line">案例1：《兰州竟然引起了全国的羡慕！西安疯了，天水哭了，嘉峪关伤了...》     ** 故意引用其他城市做夸张对比 ** </span><br><span class="line">案例2：《中国部署新型秘密武器，配备自杀敢死队，巴铁成功仿制吓坏印度》    ** 用“吓坏X国”的耸动表述故意诱导用户点击 ** </span><br><span class="line">案例3：《气垫一打开就直接涂？几乎所有女人都错了，怪不得总脱妆又卡粉！》  ** “几乎所有女人都”对女性群体做全部包含的范围夸张，诱导用户点击 **</span><br><span class="line">案例4： 《全网无人能解释，看懂的全中国不超过2个！》  ** “全网”、“全中国”故意用整体范围概念，但“无人”、“不超过2个”又极端缩小范围形成夸张对比 **</span><br><span class="line"></span><br><span class="line">2.**使用悬念式标题创作法。**标题擅用转折、隐藏关键性信息，营造悬念、制造故弄玄虚的效果,如「竟然是……」、「而是……」、「不过……」等话说一半，通过省略号代替关键信息，或使用「内幕」、「揭秘」、「真相」等代替关键信息</span><br><span class="line">案例1: 《令人唏嘘，河南试卷掉包案最新进展，省教育局发出声明，称……》    ** “称……”话说一半，用省略号隐去关键信息点 **</span><br><span class="line">案例2:《最新消息，全球最宜居国家排行榜，第一名果然是……你想去哪？》     ** 第一名是哪里可以很明确，故意不在标题中点明 **</span><br><span class="line">案例3：《举国哀痛，我国的“航母杀手”刚有威慑力，竟然传来不幸的消息》    ** 标题中可表述清楚是什么消息，但故意用“竟然”强转折来制造危机感 **</span><br><span class="line">案例4:《人狠话不多的史蒂夫奥斯丁、布洛克莱斯纳原来是这样的》 ** 原来是什么样的，可用一句话或形容词概括的内容故意不写明 **</span><br><span class="line">案例5:《演技秒杀关晓彤，减肥20斤后撞脸娜扎，被嘲谎话连篇人设崩》  ** 缺少主语，且故意用既捧又杀的表述来诱导用户点击 **</span><br><span class="line"></span><br><span class="line">3、使用强迫式标题风格创作标题。**标题采用挑衅恐吓、强迫修改后等方式，诱导用户阅读。标题使用「胆小慎入」、「不看后悔一辈子」、「别怪我没提醒你」等表述，挑衅恐吓用户点击</span><br><span class="line"></span><br><span class="line">案例1：《不要在吃饭时看这个视频，要不然会让你后悔莫及》  ** “不要”怎样、“要不然”怎样，“让你后悔莫及”都是作者在故意挑衅用户观看 **</span><br><span class="line">案例2: 《高考只剩30天，80%的答案都在这篇文章里，不看后悔一生》  ** “后悔一生”对用户形成恐吓感 **</span><br><span class="line">案例3:《5个面试时常犯的错误 让你后悔一辈子》  ** “让你后悔一辈子”是典型的恐吓写法 **</span><br><span class="line">案例4: 《疯狂抢地、地价飙升！房价大涨？烟台朋友千万要关注！！》   ** 命令式的“千万要关注”，搭配前半句的夸张表述，标题整体夸张问题严重 **</span><br><span class="line">案例5: 《应届生找工作，一定要想知道这3件事，事关前途！》  ** “一定XXX”也是常见的“命令式”夸张写法 **</span><br><span class="line"></span><br><span class="line">4.使用爆款关键词</span><br><span class="line">在创作标题时，你会选用其中1-2个：</span><br><span class="line">**「震惊」、「惊爆」、「传疯」、「不得不看」、「一定要看完」、「绝对要收藏」、「胆小慎入」、「不看后悔一辈子」、「别怪我没提醒你」、「竟然」、「竟是这样」、「结果却」、「没想到」、「竟然是……」、「而是……」、「不过……」、「内幕」、「揭秘」、「真相」、「重磅」、「要命」、「就在刚刚」、「全世界网友」、「所有男人都」、「某国人」、「99%」、**小白必看、教科书般, 划重点,建议收藏, 上天在提醒你、揭秘, 吹爆, 吐血整理,  万万没想到、你一定不知道、如何、最、咋、是什么、所有、10个、没有xx只有xx、秒懂、的故事、可怕、必看、长啥样、凭什么、不要、喂！、只需要、读懂、很可能、不是xx而是xx、你只是、当xx的时候、秘诀、为什么、在哪里、怎么办、史上、厉害、真正、是因为、方法、牛逼、你敢xx吗、你猜、马云、技巧、揭秘、爆照、必须看、传疯了、切记、围观、速看、感动、虐哭、居然、禁忌、疗法、只因、首次、伟大、猝死、出轨、小三、那些年、邂逅、秘密、意外、真相、背后究竟、绝招、第一个、否认、原来、采访、前兆、趋势、害死人、床上、你呢、赶快、不许、不要脸、千万、建议、年轻20岁、值得、和xx有关、罕见、至少、怒了、彻底、回应、强制、一触即发</span><br><span class="line"></span><br><span class="line">## 约束条件</span><br><span class="line">1.请使用以上 4 种标题创作技巧进行创作</span><br><span class="line">2.标题创作运用悬念和刺激引发读者好奇心，容易让人引起联想</span><br><span class="line">3.控制字数在 20 字以内</span><br><span class="line">4.每次列出 5 个标题，多个标题请使用 ‘\n’ 进行分割，以便用户选择</span><br><span class="line">5.收到内容后，直接创作对应的标题，无需额外的解释说明</span><br></pre></td></tr></table></figure>
<p>还有用户部分</p>
<figure>
<img src="image-20250311173734933.png" alt="image-20250311173734933" /><figcaption aria-hidden="true">image-20250311173734933</figcaption>
</figure>
<p>然后对应的效果</p>
<figure>
<img src="image-20250311173752374.png" alt="image-20250311173752374" /><figcaption aria-hidden="true">image-20250311173752374</figcaption>
</figure>
<h2 id="知识库图像检索和展示">10. 知识库图像检索和展示</h2>
<p>​ 我们可以利用工作流来实现知识库加大模型实现RAG的案例，同时在展示结果上可以把图片展示出来，这样效果会更加的直观些</p>
<figure>
<img src="image-20250311214833906.png" alt="image-20250311214833906" /><figcaption aria-hidden="true">image-20250311214833906</figcaption>
</figure>
<p>这个案例的核心点是准备的检索数据和大模型的提示词</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## </span><br><span class="line">亲子运动项目名称: 拔河小勇士</span><br><span class="line">适合年龄：5~12岁</span><br><span class="line">运动时间：10~15分钟</span><br><span class="line">运动项目介绍：家长与孩子分别站在两端，通过拔河比赛锻炼孩子的力量和团队协作能力。</span><br><span class="line">运动目标：增强孩子的上肢和腰部力量，培养团队精神。</span><br><span class="line">运动规则：使用一条结实的绳子，中间划一条线，双方用力拉绳，将对方拉过中线即为胜利。</span><br><span class="line">特别提示：注意孩子手部保护，避免摩擦受伤。</span><br><span class="line">运动图片链接：[点击查看](https://img1.baidu.com/it/u=2633321814,4120475802&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=PNG?w=286&amp;h=229)</span><br><span class="line">## </span><br><span class="line">亲子运动项目名称: 跳绳接力</span><br><span class="line">适合年龄：6~12岁</span><br><span class="line">运动时间：15~20分钟</span><br><span class="line">运动项目介绍：家长与孩子轮流跳绳，通过接力形式增加运动趣味性。</span><br><span class="line">运动目标：提高孩子的耐力和协调性，增进亲子间的默契。</span><br><span class="line">运动规则：设定一个跳绳次数目标，家长和孩子轮流跳，直到完成目标。</span><br><span class="line">特别提示：选择适合孩子高度的跳绳，注意跳绳场地的平整。</span><br><span class="line">运动图片链接：[点击查看](https://img2.baidu.com/it/u=1175898262,1254664272&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=608&amp;h=450)</span><br><span class="line">## </span><br><span class="line">亲子运动项目名称: 滚雪球大赛</span><br><span class="line">适合年龄：4~10岁</span><br><span class="line">运动时间：10~15分钟</span><br><span class="line">运动项目介绍：家长和孩子一起在雪地里滚雪球，比比谁滚得更快更大。</span><br><span class="line">运动目标：锻炼孩子的动手能力和创造力，享受冬日乐趣。</span><br><span class="line">运动规则：在规定时间内，看谁滚的雪球最大或者最快。</span><br><span class="line">特别提示：注意保暖，避免孩子受寒。</span><br><span class="line">运动图片链接：[点击查看](https://img1.baidu.com/it/u=2495318208,4233708303&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=708&amp;h=500)</span><br><span class="line">## </span><br><span class="line">亲子运动项目名称: 家庭篮球赛</span><br><span class="line">适合年龄：7~14岁</span><br><span class="line">运动时间：20~30分钟</span><br><span class="line">运动项目介绍：家长与孩子进行简易篮球比赛，提高孩子的篮球技能。</span><br><span class="line">运动目标：培养孩子的球技和团队合作意识。</span><br><span class="line">运动规则：简化篮球规则，进行半场3对3或1对1比赛。</span><br><span class="line">特别提示：穿着合适的运动装备，注意安全。</span><br><span class="line">运动图片链接：[点击查看](https://img0.baidu.com/it/u=3195478262,213097067&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=700&amp;h=467)</span><br><span class="line">## </span><br><span class="line">亲子运动项目名称: 亲子瑜伽</span><br><span class="line">适合年龄：5~12岁</span><br><span class="line">运动时间：15~20分钟</span><br><span class="line">运动项目介绍：家长与孩子一起练习瑜伽动作，增进亲子间的亲密关系。</span><br><span class="line">运动目标：提高孩子的柔韧性和平衡能力，放松身心。</span><br><span class="line">运动规则：跟随瑜伽教程，一起完成一系列瑜伽动作。</span><br><span class="line">特别提示：穿着舒适，保持呼吸均匀。</span><br><span class="line">运动图片链接：[点击查看](https://img1.baidu.com/it/u=2561021092,817698414&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=667&amp;h=500)</span><br><span class="line">## </span><br><span class="line">亲子运动项目名称: 家庭接力跑</span><br><span class="line">适合年龄：6~12岁</span><br><span class="line">运动时间：15~20分钟</span><br><span class="line">运动项目介绍：家庭成员分成两队，进行接力跑比赛。</span><br><span class="line">运动目标：提高孩子的奔跑速度和团队协作能力。</span><br><span class="line">运动规则：设定一个跑道，每队成员依次完成接力。</span><br><span class="line">特别提示：确保跑道平整，避免跌倒。</span><br><span class="line">运动图片链接：[点击查看](https://img1.baidu.com/it/u=975344947,3030921339&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=720&amp;h=480)</span><br><span class="line">## </span><br><span class="line">亲子运动项目名称: 飞盘争夺战</span><br><span class="line">适合年龄：6~12岁</span><br><span class="line">运动时间：15~20分钟</span><br><span class="line">运动项目介绍：家长与孩子进行飞盘传递和接住游戏。</span><br><span class="line">运动目标：锻炼孩子的反应速度和手眼协调能力。</span><br><span class="line">运动规则：在规定区域内，通过飞盘传递，争取让对方接不住飞盘。</span><br><span class="line">特别提示：选择开阔的场地，避免飞盘伤人。</span><br><span class="line">运动图片链接：[点击查看](https://img0.baidu.com/it/u=3788427895,2518031093&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=750&amp;h=500)</span><br><span class="line">## </span><br><span class="line">亲子运动项目名称: 家庭足球赛</span><br><span class="line">适合年龄：5~12岁</span><br><span class="line">运动时间：20~30分钟</span><br><span class="line">运动项目介绍：家长与孩子进行简易足球比赛，享受足球乐趣。</span><br><span class="line">运动目标：提高孩子的足球技能和团队精神。</span><br><span class="line">运动规则：简化足球规则，进行小场地比赛。</span><br><span class="line">特别提示：穿着足球鞋，注意场地安全。</span><br><span class="line">运动图片链接：[点击查看](https://example.com/images/soccer.jpg)</span><br><span class="line">## </span><br><span class="line">亲子运动项目名称: 亲子攀岩</span><br><span class="line">适合年龄：8~14岁</span><br><span class="line">运动时间：30~45分钟</span><br><span class="line">运动项目介绍：家长与孩子一起挑战攀岩墙，锻炼勇气和力量。</span><br><span class="line">运动目标：提高孩子的攀爬能力和自信心。</span><br><span class="line">运动规则：在专业人员的指导下，完成攀岩墙的挑战。</span><br><span class="line">特别提示：确保安全装备穿戴正确，听从指导员指挥。</span><br><span class="line">运动图片链接：[点击查看](https://example.com/images/rockclimbing.jpg)</span><br><span class="line">## </span><br><span class="line">亲子运动项目名称: 家庭自行车赛</span><br><span class="line">适合年龄：7~14岁</span><br><span class="line">运动时间：30~45分钟</span><br><span class="line">运动项目介绍：家长与孩子进行自行车比赛，享受户外运动。</span><br><span class="line">运动目标：提高孩子的骑行技巧和耐力。</span><br><span class="line">运动规则：在公园或自行车道上，设定一个往返赛道进行比赛。</span><br><span class="line">特别提示：佩戴头盔，遵守交通规则。</span><br><span class="line">运动图片链接：[点击查看](https://example.com/images/bicyclerace.jpg)</span><br><span class="line">请注意，以上图片链接仅为示例，实际图片需要您自行上传至网络并获取链接。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>提示词信息</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">## 角色</span><br><span class="line">你是一位亲子运动游戏创意专家，根据提供的&#123;&#123;#context#&#125;&#125;信息生成用户需要的亲子运动游戏。不要改变亲子运动游戏格式，要包含亲子运动项目名称、适合年龄、运动时间、运动目标、运动规则、特别提示。</span><br><span class="line"></span><br><span class="line">## 限制</span><br><span class="line">1.根据用户的具体提问回答问题，不要一下子把常见问题都输出给用户，</span><br><span class="line">2.请使用json格式输出，不要输出任何与json格式无关的内容。</span><br><span class="line"></span><br><span class="line">## 输出要求</span><br><span class="line">- 如果输出的内容包含图片URL，请使用以下JSON格式输出：</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;content&quot;: &quot;示例输出内容&quot;,</span><br><span class="line">    &quot;imageUrl&quot;: &quot;图片地址&quot;</span><br><span class="line">  &#125;</span><br><span class="line">3. 如果输出的内容不包含图片URL，请使用以下JSON格式输出：</span><br><span class="line">&#123;</span><br><span class="line">  &quot;content&quot;: &quot;示例输出内容&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img src="image-20250311214944716.png" alt="image-20250311214944716" /><figcaption aria-hidden="true">image-20250311214944716</figcaption>
</figure>
<p>注意分支的条件</p>
<figure>
<img src="image-20250311215043740.png" alt="image-20250311215043740" /><figcaption aria-hidden="true">image-20250311215043740</figcaption>
</figure>
<h2 id="自然语言生成sql">11. 自然语言生成SQL</h2>
<p>​ 演示的效果</p>
<figure>
<img src="image-20250314202727768.png" alt="image-20250314202727768" /><figcaption aria-hidden="true">image-20250314202727768</figcaption>
</figure>
<p>具体工作流设计</p>
<figure>
<img src="image-20250314202753155.png" alt="image-20250314202753155" /><figcaption aria-hidden="true">image-20250314202753155</figcaption>
</figure>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">帮我设计一个电商系统的数据库。</span><br><span class="line">需要有:</span><br><span class="line">    goods:商品表 </span><br><span class="line">    orders:订单表 </span><br><span class="line">    inventory:库存表 </span><br><span class="line">    vendors:商家表</span><br><span class="line">    customers:客户表，</span><br><span class="line">表结构的关联关系：</span><br><span class="line">	商家和商品表关联</span><br><span class="line">	商品表和库存表关联</span><br><span class="line">	订单和客户关联</span><br><span class="line">	订单和商品关联</span><br><span class="line">核心字段要求</span><br><span class="line">	goods:需要有 id 商品名称 商品价格  图片  商家</span><br><span class="line">	orders:需要有 id 客户 商品编号 商品名称  收货地址  商家id 订单时间</span><br><span class="line">	inventory:需要有 id 商品编号  库存数据</span><br><span class="line">创建的表名用对应的 英文，表中的每个字段也需要用英文描述</span><br><span class="line">创建测试数据：</span><br><span class="line">	商家表设计20条数据。</span><br><span class="line">	商品表设计50条记录，</span><br><span class="line">	库存信息设计30条记录，</span><br><span class="line">	订单按照时间生成最近半年的销售记录。每个月生成30~50条记录。</span><br><span class="line">	客户生成20条记录。</span><br><span class="line">设计数据的时候注意表结构直接的关联关系。生成的sql语句需要满足mysql的语法要求</span><br></pre></td></tr></table></figure>
<p>可以通过大模型帮我们生成对应的SQL语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> vendors (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    NAME <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    contact_info <span class="type">VARCHAR</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE TABLE</span> customers (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    NAME <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    email <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">    address <span class="type">VARCHAR</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE TABLE</span> goods (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    NAME <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    price <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    image_url <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">    vendor_id <span class="type">INT</span>,</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (vendor_id) <span class="keyword">REFERENCES</span> vendors(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE TABLE</span> inventory (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    goods_id <span class="type">INT</span>,</span><br><span class="line">    stock <span class="type">INT</span> <span class="keyword">NOT NULL</span>,</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (goods_id) <span class="keyword">REFERENCES</span> goods(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE TABLE</span> orders (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    customer_id <span class="type">INT</span>,</span><br><span class="line">    goods_id <span class="type">INT</span>,</span><br><span class="line">    goods_name <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">    shipping_address <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">    vendor_id <span class="type">INT</span>,</span><br><span class="line">    order_time DATETIME,</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (customer_id) <span class="keyword">REFERENCES</span> customers(id),</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (goods_id) <span class="keyword">REFERENCES</span> goods(id),</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (vendor_id) <span class="keyword">REFERENCES</span> vendors(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入商家数据 (20 条记录)</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> vendors (NAME, contact_info) <span class="keyword">VALUES</span></span><br><span class="line">(&quot;Vendor1&quot;, &quot;vendor1@example.com&quot;),</span><br><span class="line">(&quot;Vendor2&quot;, &quot;vendor2@example.com&quot;),</span><br><span class="line">(&quot;Vendor3&quot;, &quot;vendor3@example.com&quot;),</span><br><span class="line">(&quot;Vendor4&quot;, &quot;vendor4@example.com&quot;),</span><br><span class="line">(&quot;Vendor5&quot;, &quot;vendor5@example.com&quot;),</span><br><span class="line">(&quot;Vendor6&quot;, &quot;vendor6@example.com&quot;),</span><br><span class="line">(&quot;Vendor7&quot;, &quot;vendor7@example.com&quot;),</span><br><span class="line">(&quot;Vendor8&quot;, &quot;vendor8@example.com&quot;),</span><br><span class="line">(&quot;Vendor9&quot;, &quot;vendor9@example.com&quot;),</span><br><span class="line">(&quot;Vendor10&quot;, &quot;vendor10@example.com&quot;),</span><br><span class="line">(&quot;Vendor11&quot;, &quot;vendor11@example.com&quot;),</span><br><span class="line">(&quot;Vendor12&quot;, &quot;vendor12@example.com&quot;),</span><br><span class="line">(&quot;Vendor13&quot;, &quot;vendor13@example.com&quot;),</span><br><span class="line">(&quot;Vendor14&quot;, &quot;vendor14@example.com&quot;),</span><br><span class="line">(&quot;Vendor15&quot;, &quot;vendor15@example.com&quot;),</span><br><span class="line">(&quot;Vendor16&quot;, &quot;vendor16@example.com&quot;),</span><br><span class="line">(&quot;Vendor17&quot;, &quot;vendor17@example.com&quot;),</span><br><span class="line">(&quot;Vendor18&quot;, &quot;vendor18@example.com&quot;),</span><br><span class="line">(&quot;Vendor19&quot;, &quot;vendor19@example.com&quot;),</span><br><span class="line">(&quot;Vendor20&quot;, &quot;vendor20@example.com&quot;);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入商品数据 (50 条记录，随机分配商家)</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> goods (NAME, price, image_url, vendor_id) <span class="keyword">VALUES</span></span><br><span class="line">(&quot;Product1&quot;, <span class="number">10.99</span>, &quot;img1.jpg&quot;, <span class="number">1</span>),</span><br><span class="line">(&quot;Product2&quot;, <span class="number">20.99</span>, &quot;img2.jpg&quot;, <span class="number">2</span>),</span><br><span class="line">(&quot;Product3&quot;, <span class="number">30.99</span>, &quot;img3.jpg&quot;, <span class="number">3</span>),</span><br><span class="line">(&quot;Product4&quot;, <span class="number">40.99</span>, &quot;img4.jpg&quot;, <span class="number">4</span>),</span><br><span class="line">(&quot;Product5&quot;, <span class="number">50.99</span>, &quot;img5.jpg&quot;, <span class="number">5</span>),</span><br><span class="line">(&quot;Product6&quot;, <span class="number">15.49</span>, &quot;img6.jpg&quot;, <span class="number">6</span>),</span><br><span class="line">(&quot;Product7&quot;, <span class="number">25.49</span>, &quot;img7.jpg&quot;, <span class="number">7</span>),</span><br><span class="line">(&quot;Product8&quot;, <span class="number">35.49</span>, &quot;img8.jpg&quot;, <span class="number">8</span>),</span><br><span class="line">(&quot;Product9&quot;, <span class="number">45.49</span>, &quot;img9.jpg&quot;, <span class="number">9</span>),</span><br><span class="line">(&quot;Product10&quot;, <span class="number">55.49</span>, &quot;img10.jpg&quot;, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入库存数据 (30 条记录，随机选择商品)</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> inventory (goods_id, stock) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">100</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="number">150</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="number">200</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="number">250</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入客户数据 (20 条记录)</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> customers (NAME, email, address) <span class="keyword">VALUES</span></span><br><span class="line">(&quot;Customer1&quot;, &quot;cust1@example.com&quot;, &quot;Address1&quot;),</span><br><span class="line">(&quot;Customer2&quot;, &quot;cust2@example.com&quot;, &quot;Address2&quot;),</span><br><span class="line">(&quot;Customer3&quot;, &quot;cust3@example.com&quot;, &quot;Address3&quot;),</span><br><span class="line">(&quot;Customer4&quot;, &quot;cust4@example.com&quot;, &quot;Address4&quot;),</span><br><span class="line">(&quot;Customer5&quot;, &quot;cust5@example.com&quot;, &quot;Address5&quot;);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入订单数据 (最近半年，每月 30~50 条记录)</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> orders (customer_id, goods_id, goods_name, shipping_address, vendor_id, order_time) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">1</span>, &quot;Product1&quot;, &quot;Address1&quot;, <span class="number">1</span>, NOW()),</span><br><span class="line">(<span class="number">2</span>, <span class="number">2</span>, &quot;Product2&quot;, &quot;Address2&quot;, <span class="number">2</span>, NOW()),</span><br><span class="line">(<span class="number">3</span>, <span class="number">3</span>, &quot;Product3&quot;, &quot;Address3&quot;, <span class="number">3</span>, NOW()),</span><br><span class="line">(<span class="number">4</span>, <span class="number">4</span>, &quot;Product4&quot;, &quot;Address4&quot;, <span class="number">4</span>, NOW()),</span><br><span class="line">(<span class="number">5</span>, <span class="number">5</span>, &quot;Product5&quot;, &quot;Address5&quot;, <span class="number">5</span>, NOW());</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>然后我们可以创建对应的工作流</p>
<p>对应的表结构的说明</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">以下是每张表的数据结构说明：  </span><br><span class="line"></span><br><span class="line">### **商家表（vendors）**  </span><br><span class="line">- **id**：商家ID，整数类型，主键，自增。  </span><br><span class="line">- **name**：商家名称，字符串类型，非空。  </span><br><span class="line">- **contact_info**：联系方式，字符串类型，可为空。  </span><br><span class="line"></span><br><span class="line">### **客户表（customers）**  </span><br><span class="line">- **id**：客户ID，整数类型，主键，自增。  </span><br><span class="line">- **name**：客户名称，字符串类型，非空。  </span><br><span class="line">- **email**：电子邮件，字符串类型，可为空。  </span><br><span class="line">- **address**：收货地址，字符串类型，可为空。  </span><br><span class="line"></span><br><span class="line">### **商品表（goods）**  </span><br><span class="line">- **id**：商品ID，整数类型，主键，自增。  </span><br><span class="line">- **name**：商品名称，字符串类型，非空。  </span><br><span class="line">- **price**：商品价格，十进制(10,2)类型，非空。  </span><br><span class="line">- **image_url**：商品图片URL，字符串类型，可为空。  </span><br><span class="line">- **vendor_id**：商家ID，整数类型，外键，关联 `vendors(id)`。  </span><br><span class="line"></span><br><span class="line">### **库存表（inventory）**  </span><br><span class="line">- **id**：库存ID，整数类型，主键，自增。  </span><br><span class="line">- **goods_id**：商品ID，整数类型，外键，关联 `goods(id)`。  </span><br><span class="line">- **stock**：库存数量，整数类型，非空。  </span><br><span class="line"></span><br><span class="line">### **订单表（orders）**  </span><br><span class="line">- **id**：订单ID，整数类型，主键，自增。  </span><br><span class="line">- **customer_id**：客户ID，整数类型，外键，关联 `customers(id)`。  </span><br><span class="line">- **goods_id**：商品ID，整数类型，外键，关联 `goods(id)`。  </span><br><span class="line">- **goods_name**：商品名称，字符串类型，冗余存储，便于查询。  </span><br><span class="line">- **shipping_address**：收货地址，字符串类型，非空。  </span><br><span class="line">- **vendor_id**：商家ID，整数类型，外键，关联 `vendors(id)`。  </span><br><span class="line">- **order_time**：订单时间，日期时间类型，非空。  </span><br><span class="line"></span><br><span class="line">这样，每张表的数据结构清晰，符合关系型数据库的设计规范。你需要进一步优化或者修改吗？</span><br></pre></td></tr></table></figure>
<p>第一个LLM中的提示词内容</p>
<p>System</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">你是一位精通SQL语言的数据库专家，熟悉MySQL数据库。你的任务是根据用户的自然语言输入，编写出可直接执行的SQL查询语句。输出内容必须是可以执行的SQL语句，不能包含任何多余的信息。</span><br><span class="line"></span><br><span class="line">核心规则：</span><br><span class="line">1. 根据用户的查询需求，确定涉及的表和字段。</span><br><span class="line">2. 确保SQL语句的语法符合MySQL的规范。</span><br><span class="line">3. 输出的SQL语句必须完整且可执行，不包含注释或多余的换行符。</span><br><span class="line"></span><br><span class="line">关键技巧：</span><br><span class="line">- WHERE 子句： 用于过滤数据。例如，`WHERE column_name = &#x27;value&#x27;`。</span><br><span class="line">- **日期处理：** 使用`STR_TO_DATE`函数将字符串转换为日期类型。例如，`STR_TO_DATE(&#x27;2025-03-14&#x27;, &#x27;%Y-%m-%d&#x27;)`。</span><br><span class="line">- **聚合函数：** 如`COUNT`、`SUM`、`AVG`等，用于计算汇总信息。</span><br><span class="line">- **除法处理：** 在进行除法运算时，需考虑除数为零的情况，避免错误。</span><br><span class="line">- **日期范围示例：** 查询特定日期范围的数据时，使用`BETWEEN`关键字。例如，`WHERE date_column BETWEEN &#x27;2025-01-01&#x27; AND &#x27;2025-12-31&#x27;`。</span><br><span class="line"></span><br><span class="line">**注意事项：**</span><br><span class="line">1. 确保字段名和表名的正确性，避免拼写错误。</span><br><span class="line">2. 对于字符串类型的字段，使用单引号括起来。例如，`&#x27;sample_text&#x27;`。</span><br><span class="line">3. 在使用聚合函数时，如果需要根据特定字段分组，使用`GROUP BY`子句。</span><br><span class="line">4. 在进行除法运算时，需判断除数是否为零，以避免运行时错误。</span><br><span class="line">5. 生成的sql语句 不能有换行符 比如 \n</span><br><span class="line">6. 在计算订单金额的时候直接计算对应的商品价格就可以了，不用计算订单的商品数量</span><br><span class="line"></span><br><span class="line">请根据上述规则，将用户的自然语言查询转换为可执行的MySQL查询语句。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>user部分的提示词</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">数据库结构：</span><br><span class="line">商家表（vendors）</span><br><span class="line">id：商家ID，整数类型，主键，自增。</span><br><span class="line">name：商家名称，字符串类型，非空。</span><br><span class="line">contact_info：联系方式，字符串类型，可为空。</span><br><span class="line">客户表（customers）</span><br><span class="line">id：客户ID，整数类型，主键，自增。</span><br><span class="line">name：客户名称，字符串类型，非空。</span><br><span class="line">email：电子邮件，字符串类型，可为空。</span><br><span class="line">address：收货地址，字符串类型，可为空。</span><br><span class="line">商品表（goods）</span><br><span class="line">id：商品ID，整数类型，主键，自增。</span><br><span class="line">name：商品名称，字符串类型，非空。</span><br><span class="line">price：商品价格，十进制(10,2)类型，非空。</span><br><span class="line">image_url：商品图片URL，字符串类型，可为空。</span><br><span class="line">vendor_id：商家ID，整数类型，外键，关联 vendors(id)。</span><br><span class="line">库存表（inventory）</span><br><span class="line">id：库存ID，整数类型，主键，自增。</span><br><span class="line">goods_id：商品ID，整数类型，外键，关联 goods(id)。</span><br><span class="line">stock：库存数量，整数类型，非空。</span><br><span class="line">订单表（orders）</span><br><span class="line">id：订单ID，整数类型，主键，自增。</span><br><span class="line">customer_id：客户ID，整数类型，外键，关联 customers(id)。</span><br><span class="line">goods_id：商品ID，整数类型，外键，关联 goods(id)。</span><br><span class="line">goods_name：商品名称，字符串类型，冗余存储，便于查询。</span><br><span class="line">shipping_address：收货地址，字符串类型，非空。</span><br><span class="line">vendor_id：商家ID，整数类型，外键，关联 vendors(id)。</span><br><span class="line">order_time：订单时间，日期时间类型，非空。</span><br><span class="line"></span><br><span class="line">问题：&#123;&#123;#1741938398688.sql#&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>代码执行部分是通过Python代码调用对应的接口来执行SQL操作,这部分在前面的案例中有介绍的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">sql: <span class="built_in">str</span></span>) -&gt; <span class="built_in">dict</span>:</span><br><span class="line">    url = <span class="string">&quot;http://host.docker.internal:5000/execute_sql&quot;</span></span><br><span class="line">    connection_info = &#123;</span><br><span class="line">        <span class="string">&quot;host&quot;</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">        <span class="string">&quot;user&quot;</span>: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">        <span class="string">&quot;password&quot;</span>: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;database&quot;</span>: <span class="string">&quot;llm_shop&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 构造请求体</span></span><br><span class="line">    payload = &#123;</span><br><span class="line">        <span class="string">&quot;sql&quot;</span>: sql,</span><br><span class="line">        <span class="string">&quot;connection_info&quot;</span>: connection_info</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = requests.post(url, json=payload, headers=headers)</span><br><span class="line">        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">return</span> &#123;<span class="string">&quot;result&quot;</span>:<span class="built_in">str</span>(response.json()[<span class="string">&quot;result&quot;</span>])&#125;</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="keyword">return</span> &#123;<span class="string">&quot;result&quot;</span>: <span class="string">f&quot;解析响应 JSON 失败: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>&#125;</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="string">&quot;result&quot;</span>: <span class="string">f&quot;请求失败，状态码: <span class="subst">&#123;response.status_code&#125;</span>&quot;</span>&#125;</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&quot;result&quot;</span>: <span class="built_in">str</span>(e)&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>然后就是数据的整理。通过代码执行获取到对应的结果。然后处理成为我们需要的数据展示</p>
<figure>
<img src="image-20250314203059319.png" alt="image-20250314203059319" /><figcaption aria-hidden="true">image-20250314203059319</figcaption>
</figure>
<p>对应的提示词内容</p>
<p>System</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">你是电商行业数据分析专家，分析JSON格式的sql查询结果，回答用户问题。</span><br><span class="line">关键规则：</span><br><span class="line">1.所有数据已符合用户问题中的条件</span><br><span class="line">2.直接使用提供的数据分析，不质疑数据是否符合条件</span><br><span class="line">3.不需要再次筛选或确认数据类别/时间范围</span><br><span class="line">4.数据为[]或空或者None时直接回复&quot;没有查询到相关数据&quot;，不得编造数据</span><br></pre></td></tr></table></figure>
<p>User</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">数据是:&#123;&#123;#1741938410121.result#&#125;&#125;</span><br><span class="line">问题是：&#123;&#123;#1741938398688.sql#&#125;&#125;</span><br><span class="line">回答要求：</span><br><span class="line"> 1.列出详细数据，优先以表格方式列出数据</span><br><span class="line"> 2.识别趋势、异常，并提供分析和建议</span><br><span class="line"> 3.分析SQL语句&#123;&#123;#1741938410121.result#&#125;&#125;和用户的问题&#123;&#123;#1741938398688.sql#&#125;&#125;是否匹配</span><br><span class="line">4.最后附上查询的sql语句</span><br></pre></td></tr></table></figure>
<h2 id="echarts可视化助手">12. Echarts可视化助手</h2>
<p>​ 我们希望通过Echars 来是实现可视化的展示各种统计数据。我们通过具体的案例来给大家介绍下，具体的效果如下：</p>
<figure>
<img src="image-20250314201516085.png" alt="image-20250314201516085" /><figcaption aria-hidden="true">image-20250314201516085</figcaption>
</figure>
<p>我们可以准备一个markdown的数据</p>
<table>
<thead>
<tr class="header">
<th>年份</th>
<th>片名</th>
<th>票房（亿元）</th>
<th>平均票价（元）</th>
<th>观影人数（亿人次）</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2021</td>
<td>《你好，李焕英》</td>
<td>57.1</td>
<td>42.1</td>
<td>1.36</td>
</tr>
<tr class="even">
<td>2022</td>
<td>《长津湖之水门桥》</td>
<td>56.2</td>
<td>56.1</td>
<td>1</td>
</tr>
<tr class="odd">
<td>2023</td>
<td>《流浪地球2》</td>
<td>60</td>
<td>45</td>
<td>1.33</td>
</tr>
<tr class="even">
<td>2024</td>
<td>《抓娃娃》</td>
<td>65</td>
<td>42.1</td>
<td>1.54</td>
</tr>
</tbody>
</table>
<p>然后创建一个工作流。在开始节点我们可以上传一个文件</p>
<figure>
<img src="image-20250314201644870.png" alt="image-20250314201644870" /><figcaption aria-hidden="true">image-20250314201644870</figcaption>
</figure>
<p>然后是文档提取节点</p>
<figure>
<img src="image-20250314201720500.png" alt="image-20250314201720500" /><figcaption aria-hidden="true">image-20250314201720500</figcaption>
</figure>
<p>然后是格式转换节点：这里我们需要把提取的文档转换为csv格式的数据</p>
<figure>
<img src="image-20250314201803287.png" alt="image-20250314201803287" /><figcaption aria-hidden="true">image-20250314201803287</figcaption>
</figure>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 角色</span><br><span class="line">你是一个数据整理专家，擅长数据格式的整理和合格的转换</span><br><span class="line"># 数据</span><br><span class="line">&#123;&#123;#1741943310857.text#&#125;&#125;</span><br><span class="line"># 任务</span><br><span class="line">把数据转换为csv格式</span><br></pre></td></tr></table></figure>
<p>然后是参数提取器：需要从上一步中的格式转换数据中获取到csv的数据</p>
<figure>
<img src="image-20250314201849842.png" alt="image-20250314201849842" /><figcaption aria-hidden="true">image-20250314201849842</figcaption>
</figure>
<p>指令</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 任务</span><br><span class="line">提取csv格式的字符串</span><br></pre></td></tr></table></figure>
<p>然后是通过执行一段 Python代码生成 满足 echarts 规范的代码</p>
<figure>
<img src="image-20250314201935156.png" alt="image-20250314201935156" /><figcaption aria-hidden="true">image-20250314201935156</figcaption>
</figure>
<p>代码内容是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">csv_string</span>):</span><br><span class="line">    <span class="comment"># 将CSV字符串分割成行</span></span><br><span class="line">    lines = csv_string.strip().split(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用csv模块读取数据</span></span><br><span class="line">    reader = csv.reader(lines)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将所有行转换为列表</span></span><br><span class="line">    data = [row <span class="keyword">for</span> row <span class="keyword">in</span> reader]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将数字字符串转换为浮点数</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> data[<span class="number">1</span>:]:  <span class="comment"># 跳过标题行</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(row)):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                row[i] = <span class="built_in">float</span>(row[i])</span><br><span class="line">            <span class="keyword">except</span> ValueError:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建完整的ECharts配置</span></span><br><span class="line">    echarts_config = &#123;</span><br><span class="line">        <span class="string">&quot;legend&quot;</span>: &#123;&#125;,</span><br><span class="line">        <span class="string">&quot;tooltip&quot;</span>: &#123;&#125;,</span><br><span class="line">        <span class="string">&quot;dataset&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;source&quot;</span>: data</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;xAxis&quot;</span>: [</span><br><span class="line">            &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;category&quot;</span>, <span class="string">&quot;gridIndex&quot;</span>: <span class="number">0</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;category&quot;</span>, <span class="string">&quot;gridIndex&quot;</span>: <span class="number">1</span>&#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;yAxis&quot;</span>: [</span><br><span class="line">            &#123;<span class="string">&quot;gridIndex&quot;</span>: <span class="number">0</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;gridIndex&quot;</span>: <span class="number">1</span>&#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;grid&quot;</span>: [</span><br><span class="line">            &#123;<span class="string">&quot;bottom&quot;</span>: <span class="string">&quot;55%&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;top&quot;</span>: <span class="string">&quot;55%&quot;</span>&#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;series&quot;</span>: [</span><br><span class="line">            <span class="comment"># 第一个网格中的折线图系列</span></span><br><span class="line">            &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;seriesLayoutBy&quot;</span>: <span class="string">&quot;row&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;seriesLayoutBy&quot;</span>: <span class="string">&quot;row&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;seriesLayoutBy&quot;</span>: <span class="string">&quot;row&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;seriesLayoutBy&quot;</span>: <span class="string">&quot;row&quot;</span>&#125;,</span><br><span class="line">            <span class="comment"># 第二个网格中的柱状图系列</span></span><br><span class="line">            &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;xAxisIndex&quot;</span>: <span class="number">1</span>, <span class="string">&quot;yAxisIndex&quot;</span>: <span class="number">1</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;xAxisIndex&quot;</span>: <span class="number">1</span>, <span class="string">&quot;yAxisIndex&quot;</span>: <span class="number">1</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;xAxisIndex&quot;</span>: <span class="number">1</span>, <span class="string">&quot;yAxisIndex&quot;</span>: <span class="number">1</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;xAxisIndex&quot;</span>: <span class="number">1</span>, <span class="string">&quot;yAxisIndex&quot;</span>: <span class="number">1</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;xAxisIndex&quot;</span>: <span class="number">1</span>, <span class="string">&quot;yAxisIndex&quot;</span>: <span class="number">1</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;xAxisIndex&quot;</span>: <span class="number">1</span>, <span class="string">&quot;yAxisIndex&quot;</span>: <span class="number">1</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 生成输出文件</span></span><br><span class="line">    output = <span class="string">f&#x27;```echarts\n<span class="subst">&#123;json.dumps(echarts_config, ensure_ascii=<span class="literal">False</span>)&#125;</span>\n```&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;result&quot;</span>: output&#125;</span><br></pre></td></tr></table></figure>
<p>最后是结果的输出</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;#1741943512414.csvdata#&#125;&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&#123;&#123;#1741945375879.result#&#125;&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img src="image-20250314202114303.png" alt="image-20250314202114303" /><figcaption aria-hidden="true">image-20250314202114303</figcaption>
</figure>
<p>然后就可以测试运行了</p>
<figure>
<img src="image-20250314202439874.png" alt="image-20250314202439874" /><figcaption aria-hidden="true">image-20250314202439874</figcaption>
</figure>
<h2 id="文生图工作流">13. 文生图工作流</h2>
<p>​ 我们前面有介绍过文生图的案例，是在Dify中通过相关的工具来实现的。不过这种效果不是特别的高效，会被平台控制的比较严格。我们可以直接通过文生图的模型提供的API来直接访问生成。这样的效果会更好一些。我们来看看具体怎么实现吧。</p>
<figure>
<img src="image-20250316010457190.png" alt="image-20250316010457190" /><figcaption aria-hidden="true">image-20250316010457190</figcaption>
</figure>
<p>具体的效果为</p>
<figure>
<img src="image-20250316010616818.png" alt="image-20250316010616818" /><figcaption aria-hidden="true">image-20250316010616818</figcaption>
</figure>
<p>生成的效果：</p>
<figure>
<img src="image-20250316011615321.png" alt="image-20250316011615321" /><figcaption aria-hidden="true">image-20250316011615321</figcaption>
</figure>
<p>图片的生成我们使用的是SiliconClound来实现。文档地址：https://docs.siliconflow.cn/cn/api-reference/images/images-generations</p>
<figure>
<img src="image-20250316012208833.png" alt="image-20250316012208833" /><figcaption aria-hidden="true">image-20250316012208833</figcaption>
</figure>
<h2 id="生成小说和角色">14. 生成小说和角色</h2>
<p>​ 我们接下来看一个基于大模型来生成小说和相关角色的案例</p>
<figure>
<img src="image-20250316014016339.png" alt="image-20250316014016339" /><figcaption aria-hidden="true">image-20250316014016339</figcaption>
</figure>
<p>效果</p>
<figure>
<img src="image-20250316014108708.png" alt="image-20250316014108708" /><figcaption aria-hidden="true">image-20250316014108708</figcaption>
</figure>
<figure>
<img src="image-20250316014116356.png" alt="image-20250316014116356" /><figcaption aria-hidden="true">image-20250316014116356</figcaption>
</figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://cryingatnight.github.io">Yinjin Yao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://cryingatnight.github.io/2025/09/14/Dify%E6%95%99%E7%A8%8B/">https://cryingatnight.github.io/2025/09/14/Dify%E6%95%99%E7%A8%8B/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://cryingatnight.github.io" target="_blank">Yinjin Yao的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Dify/">Dify</a></div><div class="post-share"><div class="social-share" data-image="/img/lita7.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/09/19/%E9%80%90%E5%B1%82%E5%88%86%E8%A7%A3Transformer/" title="逐层分解Transformer"><img class="cover" src="/img/lita8.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">逐层分解Transformer</div></div><div class="info-2"><div class="info-item-1">Transformer整体结构 下面的Transformer的整体结构，下图是Transformer用与中英文翻译的整体结构：   [!notice] 可以看到==Transformer==由==Encoder==和==Decoder==两个部分组成，Encoder和Decoder都包含6个==block==。   Transformer的工作流程大体如下:  第一步：获取输入句子的每一个单词的表示向量X,X由单词的 Embedding(Embedding就是从原始数据提取出来的Feature)和单词位置的Embedding相加得到。  第二步：将得到的单词表示向量矩阵（如上图所示，每一行是一个单词的表示）传入Encoder中，经过6个Encoder block(后可以得到句子所有单词的编码信息矩阵C,如下图。单词向量矩阵用Xn × d表示，n是句子中单词个数，d是表示向量的维度( d=512)。每一个Encoder block输出的矩阵维度与输入完全一致。  第三步：将Encoder输出的编码信息矩阵C传递到Decoder中，Decoder依次会根据当前翻...</div></div></div></a><a class="pagination-related" href="/2025/08/25/RAG%E6%A3%80%E7%B4%A2%E7%94%9F%E6%88%90/" title="RAG检索生成"><img class="cover" src="/img/lita5.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">RAG检索生成</div></div><div class="info-2"><div class="info-item-1">RAG介绍 RAG(Retrieval Augmented Generation) RAG（检索增强生成）是一种结合语言模型与信息检索技术的技术，通过从外部知识源检索相关背景信息来提升文本生成或回答问题的准确性和质量。 1.LLM的缺陷 1.LLM的知识不是实时的，不具备知识更新 2.LLM可能不知道你私有的领域/业务知识， 3.LLM有时会在回答中生成看似合理但实际上是错误的信息， 2.为什么会用到RAG 1.提高准确性：通过检索相关的信息，RAG可以提高生成文本的准确性。 2.减少训练成本：与需要大量数据来训练的大型生成模型相比，RAG可以通过检索机制来减少所需的训练数据量，从而降低训川练成本。 3.适应性强：AG模型可以适应新的或不断变化的数据。由于它们能够检索最新的信息，因此在新数据和事件出现时，它们能够快速适应并生成相关的文本。 ## 3.RAG概念 RAG(Retrieval Augmented Generation)顾名思义，通过检索外部数据，增强大模型的生成效果。 RAG即检索增强生成，为LLM提供了从某些数据源检索到的信息，并基于此修正生成的答案。R...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/headimage.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Yinjin Yao</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/cryingatnight/cryingatnight.github.io"><i class="fab fa-github"></i><span>关注</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/cryingatnight/cryingatnight.github.io" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:1816192779@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80dify%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">一、Dify的介绍</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8Cdify%E7%9A%84%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">二、Dify的安装方式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E7%BA%BF%E4%BD%93%E9%AA%8C"><span class="toc-number">2.1.</span> <span class="toc-text">1. 在线体验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2"><span class="toc-number">2.2.</span> <span class="toc-text">2. 本地部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#docker%E5%AE%89%E8%A3%85"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.1 Docker安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dockerdesktop"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.2 DockerDeskTop</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ollama"><span class="toc-number">2.3.</span> <span class="toc-text">3. Ollama</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dify%E5%85%B3%E8%81%94ollama"><span class="toc-number">2.4.</span> <span class="toc-text">4.Dify关联Ollama</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89dify%E5%BA%94%E7%94%A8%E8%AE%B2%E8%A7%A3"><span class="toc-number">3.</span> <span class="toc-text">三、Dify应用讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%A9%BA%E7%99%BD%E5%BA%94%E7%94%A8"><span class="toc-number">3.1.</span> <span class="toc-text">1. 创建空白应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%9F%A5%E8%AF%86%E5%BA%93"><span class="toc-number">3.2.</span> <span class="toc-text">2. 创建本地知识库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91%E9%87%8F%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.2.1.</span> <span class="toc-text">2.1 向量模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0embedding%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.2.2.</span> <span class="toc-text">2.2 添加Embedding模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%9F%A5%E8%AF%86%E5%BA%93"><span class="toc-number">3.2.3.</span> <span class="toc-text">2.3 创建知识库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%BA%93%E5%BA%94%E7%94%A8"><span class="toc-number">3.3.</span> <span class="toc-text">3. 知识库应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%9F%A5%E8%AF%86%E5%BA%93"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.1 添加知识库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.2 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ai%E5%9B%BE%E7%89%87%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7"><span class="toc-number">3.4.</span> <span class="toc-text">4. AI图片生成工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A6%96%E5%85%88%E8%8E%B7%E5%8F%96stable-diffusion"><span class="toc-number">3.4.1.</span> <span class="toc-text">4.1 首先获取Stable Diffusion</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD-stable-%E5%B7%A5%E5%85%B7"><span class="toc-number">3.4.2.</span> <span class="toc-text">4.2 下载 Stable 工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAagent"><span class="toc-number">3.4.3.</span> <span class="toc-text">4.3 创建Agent</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%85%E6%B8%B8%E5%8A%A9%E6%89%8B"><span class="toc-number">3.5.</span> <span class="toc-text">5. 旅游助手</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E6%89%A7%E8%A1%8C%E5%99%A8"><span class="toc-number">3.6.</span> <span class="toc-text">6. SQL执行器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A7%91%E7%A0%94%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91"><span class="toc-number">3.7.</span> <span class="toc-text">7. 科研论文翻译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#seo%E7%BF%BB%E8%AF%91"><span class="toc-number">3.8.</span> <span class="toc-text">8. SEO翻译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E9%A2%98%E5%85%9A"><span class="toc-number">3.9.</span> <span class="toc-text">9. 标题党</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%BA%93%E5%9B%BE%E5%83%8F%E6%A3%80%E7%B4%A2%E5%92%8C%E5%B1%95%E7%A4%BA"><span class="toc-number">3.10.</span> <span class="toc-text">10. 知识库图像检索和展示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E7%94%9F%E6%88%90sql"><span class="toc-number">3.11.</span> <span class="toc-text">11. 自然语言生成SQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#echarts%E5%8F%AF%E8%A7%86%E5%8C%96%E5%8A%A9%E6%89%8B"><span class="toc-number">3.12.</span> <span class="toc-text">12. Echarts可视化助手</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%94%9F%E5%9B%BE%E5%B7%A5%E4%BD%9C%E6%B5%81"><span class="toc-number">3.13.</span> <span class="toc-text">13. 文生图工作流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%B0%8F%E8%AF%B4%E5%92%8C%E8%A7%92%E8%89%B2"><span class="toc-number">3.14.</span> <span class="toc-text">14. 生成小说和角色</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/09/26/LangChain%E4%BD%BF%E7%94%A8%E6%A6%82%E8%BF%B0/" title="LangChain使用概述"><img src="/img/lita5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LangChain使用概述"/></a><div class="content"><a class="title" href="/2025/09/26/LangChain%E4%BD%BF%E7%94%A8%E6%A6%82%E8%BF%B0/" title="LangChain使用概述">LangChain使用概述</a><time datetime="2025-09-26T03:37:36.148Z" title="更新于 2025-09-26 11:37:36">2025-09-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/23/chromadb%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/" title="chromadb向量数据库"><img src="/img/%E4%BA%94%E6%9D%A1%E6%82%9F.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="chromadb向量数据库"/></a><div class="content"><a class="title" href="/2025/09/23/chromadb%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/" title="chromadb向量数据库">chromadb向量数据库</a><time datetime="2025-09-23T16:37:51.853Z" title="更新于 2025-09-24 00:37:51">2025-09-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/19/%E9%80%90%E5%B1%82%E5%88%86%E8%A7%A3Transformer/" title="逐层分解Transformer"><img src="/img/lita8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="逐层分解Transformer"/></a><div class="content"><a class="title" href="/2025/09/19/%E9%80%90%E5%B1%82%E5%88%86%E8%A7%A3Transformer/" title="逐层分解Transformer">逐层分解Transformer</a><time datetime="2025-09-22T06:53:55.325Z" title="更新于 2025-09-22 14:53:55">2025-09-22</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2025 By Yinjin Yao</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.2</a></span></div><div class="footer_custom_text">感谢阅读</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="输入以搜索内容..." type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>